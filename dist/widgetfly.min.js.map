{"version":3,"file":"widgetfly.min.js","sources":["widgetfly.js"],"names":["root","factory","define","amd","Widgetfly","this","doc","cssText","styleEl","createElement","getElementsByTagName","appendChild","styleSheet","disabled","innerHTML","ignore","innerText","document","Utils","idCounter","has","obj","key","Object","prototype","hasOwnProperty","call","each","iterator","context","i","l","Array","forEach","length","isEmpty","extend","slice","arguments","source","prop","inherit","Child","Parent","F","constructor","uber","params","str","trim","replace","split","reduce","ret","param","parts","val","decodeURIComponent","undefined","isArray","push","uniqueId","prefix","id","String","inIframe","window","self","top","e","isFunction","isElement","o","HTMLElement","nodeType","nodeName","hasClass","element","cls","className","indexOf","addClass","innerStyle","removeClass","rmClass","newClass","toggleClass","a","r","match","ruleExp","result","rules","styles","sheets","styleSheets","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","cssRules","selectorText","exec","join","hasAttribute","getAttribute","style","actual","el","elWidth","elHeight","fixStyle","size","s","Boolean","parseInt","substring","offsetParent","setAttribute","offsetWidth","offsetHeight","width","marginLeft","marginRight","height","marginTop","marginBottom","offset","docElem","win","elem","box","left","ownerDocument","documentElement","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","toElement","content","firstChild","Events","trigger","action","data","Mediator","send","on","callback","bind","off","unbind","widgets","actionHandlers","init","addEventListener","msgObj","receive","getWidget","getActionHandlers","register","widget","mediator","unregister","console","log","parser","targetOrigin","corsObj","msg","href","iframe","src","protocol","host","contentWindow","postMessage","keys","origin","widgetId","myActionHandlers","Server","name","events","parent","paramData","location","hash","JSON","parse","show","hide","onClose","close","setSize","Widget","DEFAULTS","spinner","getId","j","nodes","childNodes","getIframe","querySelector","tagName","onStart","start","handlers","container","parentNode","removeChild","options","onHide","onShow","isShow","onBeforeClose","nowScripts","cScript","render","urlOptions","pathname","template","encodeURIComponent","stringify","Panel","apply","hasChildNodes","lastChild","autoGrow","remove","Modal","removChild","backdrop","onclick","target","sizeChange","getElementsByName","Popover","placement","applyPlacement","tg","Math","round","interval","clearInterval","setInterval","protoProps","staticProps","child","Surrogate","__super__","currentScript"],"mappings":"CASC,SAASA,KAAMC,SAAU,YACD,mBAAXC,SAAyBA,OAAOC,IAE3CD,UAAW,WAIV,MAAQF,MAAKI,UAAYH,QAAQD,QAIlCA,KAAKI,UAAYH,QAAQD,OAEzBK,KAAM,WACP,YACA,IAAID,WAAY,WAEf,GAAIA,aA0iCJ,OAxiCC,UAAUE,IAAKC,SACZ,GAAIC,SAAUF,IAAIG,cAAc,QAEhC,IADAH,IAAII,qBAAqB,QAAQ,GAAGC,YAAYH,SAC5CA,QAAQI,WACHJ,QAAQI,WAAWC,WACpBL,QAAQI,WAAWL,QAAUA,aAGjC,KACIC,QAAQM,UAAYP,QACtB,MAAOQ,QACLP,QAAQQ,UAAYT,UAG9BU,SAAU,inKAEZb,UAAUc,MAAQ,WAIjB,GAAIC,WAAY,EAAGD,OAClBE,IAAM,SAASC,IAAKC,KACnB,MAAOC,QAAOC,UAAUC,eAAeC,KAAKL,IAAKC,MAGlDK,KAAO,SAASN,IAAKO,SAAUC,SAC9B,GAAIC,GAAGC,EAAGT,GAEV,IAAY,OAARD,IACH,OAAO,CAGR,IAAIW,MAAMR,UAAUS,SAAWZ,IAAIY,UAAYD,MAAMR,UAAUS,QAC9DZ,IAAIY,QAAQL,SAAUC,aAChB,IAA2B,gBAAfR,KAAIa,QACtB,IAAMJ,EAAI,EAAGC,EAAIV,IAAIa,OAAYH,EAAJD,EAAOA,IACnC,GAAIF,SAASF,KAAKG,QAASR,IAAIS,GAAIA,EAAGT,UACrC,OAAO,MAIT,KAAKC,MAAOD,KACX,GAAIjB,UAAUc,MAAME,IAAIC,IAAKC,MACxBM,SAASF,KAAKG,QAASR,IAAIC,KAAMA,IAAKD,UACzC,OAAO,GAOZc,QAAU,SAASd,KAElB,GAAY,OAARA,IACH,OAAO,CAKR,IAAIA,IAAIa,OAAS,EAChB,OAAO,CAGR,IAAmB,IAAfb,IAAIa,OACP,OAAO,CAMR,KAAK,GAAIZ,OAAOD,KACf,GAAII,eAAeC,KAAKL,IAAKC,KAC5B,OAAO,CAGT,QAAO,GAGRc,OAAS,SAASf,KAQjB,MAPAhB,MAAKsB,KAAKK,MAAMR,UAAUa,MAAMX,KAAKY,UAAW,GAAI,SAASC,QAC5D,GAAIA,OACH,IAAK,GAAIC,QAAQD,QAChBlB,IAAImB,MAAQD,OAAOC,QAIfnB,KAGRoB,QAAU,SAASC,MAAOC,QACzB,GAAIC,GAAI,YAERA,GAAEpB,UAAYmB,OAAOnB,UACrBkB,MAAMlB,UAAY,GAAIoB,GACtBF,MAAMlB,UAAUqB,YAAcH,MAC9BA,MAAMI,KAAOH,OAAOnB,WAOrBuB,OAAS,SAAUC,KAClB,MAAmB,gBAARA,SAIXA,IAAMA,IAAIC,OAAOC,QAAQ,UAAW,IAE/BF,IAIEA,IAAIC,OAAOE,MAAM,KAAKC,OAAO,SAAUC,IAAKC,OAClD,GAAIC,OAAQD,MAAMJ,QAAQ,MAAO,KAAKC,MAAM,KACxC7B,IAAMiC,MAAM,GACZC,IAAMD,MAAM,EAehB,OAbAjC,KAAMmC,mBAAmBnC,KAGzBkC,IAAcE,SAARF,IAAoB,KAAOC,mBAAmBD,KAE/CH,IAAI5B,eAAeH,KAEbU,MAAM2B,QAAQN,IAAI/B,MAC5B+B,IAAI/B,KAAKsC,KAAKJ,KAEdH,IAAI/B,MAAQ+B,IAAI/B,KAAMkC,KAJtBH,IAAI/B,KAAOkC,IAOLH,cAITQ,SAAW,SAASC,QACnB,GAAIC,IAAKC,SAAS7C,UAClB,OAAO2C,QAASA,OAASC,GAAKA,IAG/BE,SAAW,WACV,IACC,MAAOC,QAAOC,OAASD,OAAOE,IAC7B,MAAOC,GACR,OAAO,IAITC,WAAa,SAASjD,KACrB,MAAsB,kBAARA,MAGfkD,UAAY,SAASC,GACpB,MAAgC,gBAAhBC,aAA2BD,YAAaC,aAAcD,GAAkB,gBAANA,IAAwB,OAANA,GAA6B,IAAfA,EAAEE,UAAwC,gBAAfF,GAAEG,UAGhJC,SAAW,SAASC,QAASC,KAC5B,OAAQ,IAAMD,QAAQE,UAAY,KAAKC,QAAQ,IAAMF,IAAM,KAAO,IAGnEG,SAAW,SAASJ,QAASE,WACvB1E,KAAKuE,SAASC,QAASE,aAC3BF,QAAQE,WAAa,IAAMA,WAE5B1E,KAAK6E,WAAWL,UAGjBM,YAAc,SAASN,QAASO,SAC/B,GAAIC,SACJ,IAAgB3B,SAAZmB,SAAyBxE,KAAKkE,UAAUM,WAC3CQ,SAAW,IAAMR,QAAQE,UAAU7B,QAAQ,YAAa,KAAO,IAC3D7C,KAAKuE,SAASC,QAASO,UAAU,CACpC,KAAOC,SAASL,QAAQ,IAAMI,QAAU,MAAQ,GAC/CC,SAAWA,SAASnC,QAAQ,IAAMkC,QAAU,IAAK,IAElDP,SAAQE,UAAYM,SAASnC,QAAQ,aAAc,IAGrD7C,KAAK6E,WAAWL,UAGjBS,YAAc,SAAST,QAASE,WAC/B,GAAIM,SACJ,IAAgB3B,SAAZmB,SAAyBxE,KAAKkE,UAAUM,SAE3C,GADAQ,SAAW,IAAMR,QAAQE,UAAU7B,QAAQ,YAAa,KAAO,IAC3D7C,KAAKuE,SAASC,QAASE,WAAY,CACtC,KAAOM,SAASL,QAAQ,IAAMD,UAAY,MAAQ,GACjDM,SAAWA,SAASnC,QAAQ,IAAM6B,UAAY,IAAK,IAEpDF,SAAQE,UAAYM,SAASnC,QAAQ,aAAc,QAEnD2B,SAAQE,WAAa,IAAMA,SAG7B1E,MAAK6E,WAAWL,UAGjBK,WAAa,SAAaK,GACtB,GAAIzD,GAAE0D,EAAGC,MAAOC,QAASC,OAAmBC,MAAZC,UAAmBC,OAAS7E,SAAS8E,YAAavB,IAClFe,GAAES,QAAUT,EAAES,SAAWT,EAAEU,uBAAyBV,EAAEW,oBAAsBX,EAAEY,mBAAqBZ,EAAEa,gBACrG,KAAKtE,IAAKgE,QAAQ,CACdF,MAAQE,OAAOhE,GAAG8D,OAASE,OAAOhE,GAAGuE,QACrC,KAAKb,IAAKI,OACFL,EAAES,QAAQJ,MAAMJ,GAAGc,eACnB9B,EAAEZ,KAAKgC,MAAMJ,GAAGjF,SAI5B,IAAKuB,IAAK0C,GACZgB,EAAIhB,EAAE1C,GACyB,IAA5B0D,EAAER,QAAQ,gBACZU,QAAU,qBACVD,MAAQC,QAAQa,KAAKf,GAClBC,OACFI,OAAOjC,KAAK6B,MAAM,IAIlBE,QAASE,OAAOW,KAAK,KAClBjB,EAAEkB,aAAa,oBACpBd,OAASA,OAAS,IAAMJ,EAAEmB,aAAa,mBAExCnB,EAAEoB,MAAMpG,QAAUoF,QAGnBiB,OAAS,SAASC,IACjB,GAAIC,SAAQC,SAASJ,MACrBK,SAAW,4FACXC,KAAO,SAASC,GACd,MAAGC,SAAQD,GACHE,SAASF,EAAEG,UAAU,EAAEH,EAAElC,QAAQ,OAAO,IAExC,EAgBV,OAZwB,QAApB6B,GAAGS,cACNT,GAAGU,aAAa,QAASV,GAAGH,aAAa,SAAWM,UAGrDF,QAAUD,GAAGW,YAEbT,SAAWF,GAAGY,aAEdd,MAAQE,GAAGH,aAAa,SACrBC,OAAqC,IAA5BA,MAAM3B,QAAQgC,WACzBH,GAAGU,aAAa,QAASZ,MAAMU,UAAU,EAAEV,MAAM3B,QAAQgC,aAGzDU,MAAQZ,QAAUG,KAAKJ,GAAGF,MAAMgB,YAAcV,KAAKJ,GAAGF,MAAMiB,aAC5DC,OAASd,SAAWE,KAAKJ,GAAGF,MAAMmB,WAAab,KAAKJ,GAAGF,MAAMoB,gBAI/DC,OAAQ,SAASnB,IAChB,GAAIoB,SAASC,IACbC,KAAOtB,GACPuB,KAAQhE,IAAK,EAAGiE,KAAM,GACtB/H,IAAM6H,MAAQA,KAAKG,aAEnB,IAAMhI,IAWN,MAPA2H,SAAU3H,IAAIiI,gBAG6B7E,eAA/ByE,MAAKK,wBAChBJ,IAAMD,KAAKK,yBAEZN,IAAMhE,QAELE,IAAKgE,IAAIhE,IAAM8D,IAAIO,YAAcR,QAAQS,UACzCL,KAAMD,IAAIC,KAAOH,IAAIS,YAAcV,QAAQW,aAI7CC,UAAY,SAASC,SACpB,GAAIjC,IAAK5F,SAASR,cAAc,MAEhC,OADAoG,IAAG/F,UAAYgI,QACRjC,GAAGkC,YAKZ,OAAO7H,QACLb,MAEHD,UAAU4I,OAAS,WAGlB,GAAIA,QAAS,YAeb,OAZAA,QAAOxH,UAAUyH,QAAU,SAASC,OAAQC,MAC3C/I,UAAUgJ,SAASC,KAAKhJ,KAAK0D,GAAImF,OAAQC,OAG1CH,OAAOxH,UAAU8H,GAAK,SAASJ,OAAQK,UACtCnJ,UAAUgJ,SAASI,KAAKnJ,KAAK0D,GAAImF,OAAQK,WAG1CP,OAAOxH,UAAUiI,IAAM,SAASP,QAC/B9I,UAAUgJ,SAASM,OAAOrJ,KAAK0D,GAAImF,SAG7BF,QACL3I,MAEHD,UAAUgJ,SAAW,WAGpB,GAAIA,WAEHO,WAEAC,kBAEAC,KAAO,WACN,GAAI1F,MAAO9D,IACX6D,QAAO4F,iBAAiB,UAAW,SAASC,QAC3C5F,KAAK6F,QAAQD,UACX,IAGJE,UAAY,SAASlG,IACpB,MAAO1D,MAAKsJ,QAAQ5F,KAGrBmG,kBAAoB,SAASnG,IAC5B,MAAO1D,MAAKuJ,eAAe7F,KAG5BoG,SAAW,SAASpG,GAAIqG,QACvB/J,KAAKsJ,QAAQS,OAAOrG,IAAMqG,OAC1BA,OAAOC,SAAWhK,KAClBA,KAAKuJ,eAAeQ,OAAOrG,QAG5BuG,WAAa,SAASvG,GAAIwF,UACzB,GAAgC7F,SAA5BrD,KAAKuJ,eAAe7F,IAAmB,CAC1C,GAAII,MAAO9D,IACXD,WAAUc,MAAMS,KAAKtB,KAAKuJ,eAAe7F,IAAK,SAASzC,WAC/C6C,MAAKyF,eAAe7F,IAAIzC,aAG1BjB,MAAKsJ,QAAQ5F,IACpBwF,UAAS,IAGVF,KAAO,SAAStF,GAAImF,OAAQC,MAC3BoB,QAAQC,IAAI,gBAEZ,IAAIC,QAAQC,aAAcC,SACzBC,IAAMzB,KACND,OAASA,OACTnF,GAAKA,IACHqG,OAAS/J,KAAKsJ,QAAQ5F,GAErBqG,UACHK,OAASvG,OAAOjD,SAASR,cAAc,KACvCgK,OAAOI,KAAOT,OAAOU,OAAOC,IAC5BL,aAAeD,OAAOO,SAAW,KAAOP,OAAOQ,KAC/Cb,OAAOU,OAAOI,cAAcC,YAAYR,QAASD,gBAInDlB,KAAO,SAASzF,GAAImF,OAAQK,UAC3BgB,QAAQC,IAAI,kBAAoBtB,QACAxF,SAA5BrD,KAAKuJ,eAAe7F,MACvB1D,KAAKuJ,eAAe7F,QAErB1D,KAAKuJ,eAAe7F,IAAImF,QAAUK,UAGnCG,OAAS,SAAS3F,GAAImF,QACrBqB,QAAQC,IAAI,yBACLnK,MAAKuJ,eAAe7F,IAAImF,QAC3B3H,OAAO6J,KAAK/K,KAAKuJ,eAAe7F,KAAK7B,QAAU,SAC3C7B,MAAKuJ,eAAe7F,KAI7BiG,QAAU,SAASD,QAClBQ,QAAQC,IAAI,mBAEZ,IAAIa,QAAQZ,OAAQa,SAAWvB,OAAOZ,KAAKpF,GAAIqG,OAAS/J,KAAKsJ,QAAQ2B,UAAWC,iBAAmBlL,KAAKuJ,eAAe0B,UAAWpC,OAASa,OAAOZ,KAAKD,MAEvJ,IAAIkB,OAAQ,CAKX,GAJAK,OAASvG,OAAOjD,SAASR,cAAc,KACvCgK,OAAOI,KAAOT,OAAOU,OAAOC,IAC5BM,OAASZ,OAAOO,SAAW,KAAOP,OAAOQ,KAErCI,SAAWtB,OAAOsB,OAErB,WADAd,SAAQC,IAAI,8BAAgCT,OAAOsB,OAIhDjB,SAAUhK,UAAUc,MAAMoD,WAAW8F,OAAOlB,SAC/CkB,OAAOlB,QAAQa,OAAOZ,KAAKyB,MAEtBxK,UAAUc,MAAMiB,QAAQoJ,mBAAqBnL,UAAUc,MAAMoD,WAAWiH,iBAAiBrC,UAC7FqC,iBAAiBrC,QAAQa,OAAOZ,KAAKyB,OAO1C,OAAOxB,WACL/I,MAEHD,UAAUoL,OAAS,WAGlB,GAAIA,QAAS,WACZnL,KAAK0D,GAAKG,OAAOuH,KACjBpL,KAAKqL,UACLrL,KAAKwJ,OA2FN,OAxFAzJ,WAAUc,MAAMuB,QAAQ+I,OAAQpL,UAAU4I,QAE1CwC,OAAOhK,UAAUqI,KAAO,WACvB,GAAI1F,MAAO9D,IACXA,MAAK4I,QAAQ,SACb/E,OAAO4F,iBAAiB,UAAW,SAASC,QAC3C,GAAG7F,OAAOyH,OAAO,CAChB,GAAIzC,QAAQmC,OAAQZ,OAAQ1H,OAAO6I,UAAYnI,mBAAmBS,OAAO2H,SAASC,KAAKzE,UAAU,GAOjG,IANAtE,OAASgJ,KAAKC,MAAMJ,WAEpBnB,OAASvG,OAAOjD,SAASR,cAAc,KACvCgK,OAAOI,KAAO9H,OAAOsI,OACrBA,OAASZ,OAAOO,SAAW,KAAOP,OAAOQ,KAE3B,YAAXI,QAAwBA,SAAWtB,OAAOsB,OAE5C,WADAd,SAAQC,IAAI,8BAAgCT,OAAOsB,OAIpDnC,QAASa,OAAOZ,KAAKD,OACjB9I,UAAUc,MAAMoD,WAAWH,KAAK+E,SACnC/E,KAAK+E,QAAQa,OAAOZ,KAAKyB,MAEpBxK,UAAUc,MAAMiB,QAAQgC,KAAKuH,SAAWtL,UAAUc,MAAMoD,WAAWH,KAAKuH,OAAOxC,UACnF/E,KAAKuH,OAAOxC,QAAQa,OAAOZ,KAAKyB,QAIjC,IAGJY,OAAOhK,UAAU8H,GAAK,SAAShI,IAAKiI,UACnClJ,KAAKqL,OAAOpK,KAAOiI,UAGpBiC,OAAOhK,UAAUiI,IAAM,SAASnI,WACxBjB,MAAKqL,OAAOpK,MAGpBkK,OAAOhK,UAAUyH,QAAU,SAASC,OAAQC,MAC3CoB,QAAQC,IAAI,iBACZ,IAAIG,UACHC,IAAMzB,KACND,OAASA,OACTnF,GAAK1D,KAAK0D,IACRhB,OAASgJ,KAAKC,MAAMvI,mBAAmBS,OAAO2H,SAASC,KAAKzE,UAAU,IAGzEsE,QAAOR,YAAYR,QAAS5H,OAAOsI,SAGpCG,OAAOhK,UAAUyK,KAAO,WACvB5L,KAAK4I,QAAQ,SAGduC,OAAOhK,UAAU0K,KAAO,WACvB7L,KAAK4I,QAAQ,SAGduC,OAAOhK,UAAU2K,QAAU,SAAS5C,UACnCgB,QAAQC,IAAI,yBACZjB,YAGDiC,OAAOhK,UAAU4K,MAAQ,WACxB7B,QAAQC,IAAI,8BACZ,IAAIrG,MAAO9D,IACXD,WAAUc,MAAMS,KAAKtB,KAAKqL,OAAQ,SAASpK,WACnC6C,MAAKuH,OAAOpK,OAGpBjB,KAAK8L,QAAQ,WACZ5B,QAAQC,IAAI,uBACZrG,KAAK8E,QAAQ,YAUfuC,OAAOhK,UAAU6K,QAAU,SAAS3E,MAAOG,QAE1CzH,UAAU4I,OAAOC,QAAQ/E,OAAOuH,KAAM,aAAc/D,MAAOG,SAGrD2D,QAELnL,MAEHD,UAAUkM,OAAS,WAGlB,GAAIA,QAAS,WAEZ,MADAjM,MAAK0D,GAAK3D,UAAUc,MAAM2C,SAAS,UAC5BxD,KAwKR,OArKAiM,QAAOC,SAAWnM,UAAUc,MAAMkB,WACjCoK,QAAU,uIAGXpM,UAAUc,MAAMuB,QAAQ6J,OAAQlM,UAAU4I,QAE1CsD,OAAO9K,UAAUiL,MAAQ,WACxB,MAAOpM,MAAK0D,IAGbuI,OAAO9K,UAAUmF,MAAQ,WACxB,GAAInB,GAAI,SAASqB,IACbA,GAAG9B,WACL3E,UAAUc,MAAM+D,SAAS4B,GAAIA,GAAG9B,UAEjC,IAAIjD,GAAE4K,EAAGC,MAAQ9F,GAAG+F,UACpB,KAAI9K,IAAK6K,OAKR,IAJGA,MAAM7K,GAAGiD,WAA0D,IAA5C4H,MAAM7K,GAAGiD,UAAUC,QAAQ,cAA4D,IAAtC2H,MAAM7K,GAAGiD,UAAUC,QAAQ,QAErG5E,UAAUc,MAAM+D,SAAS0H,MAAM7K,GAAI6K,MAAM7K,GAAGiD,WAE1C4H,MAAM7K,GAAG8K,WACX,IAAIF,IAAKC,OAAM7K,GAAG8K,WACjBpH,EAAEmH,MAAM7K,GAAG8K,WAAWF,IAK1BlH,GAAEnF,KAAKwG,KAGRyF,OAAO9K,UAAUqL,UAAY,WAC5B,GAAI/B,QAASzK,KAAKwG,GAAGiG,cAAc,SAMnC,OALIhC,SACoB,WAApBzK,KAAKwG,GAAGkG,UACVjC,OAASzK,KAAKwG,IAGTiE,QAGRwB,OAAO9K,UAAUwL,QAAU,SAASzD,UAC/BnJ,UAAUc,MAAMoD,WAAWiF,WAC9BlJ,KAAKiJ,GAAG,UAAWC,WAIrB+C,OAAO9K,UAAUyL,MAAQ,WACxB1C,QAAQC,IAAI,sBACZ,IAAI0C,UAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,GACrDmJ,WAAY9M,UAAUc,MAAMoD,WAAW4I,SAASF,UACnDE,SAASF,UAEP3M,KAAKmM,SACJnM,KAAK8M,YAAc9M,KAAKmM,QAAQY,YAClC/M,KAAK8M,UAAUE,YAAYhN,KAAKmM,SAG/BnM,KAAKiN,QAAQrB,KACf5L,KAAK4L,OAEL5L,KAAK6L,QAIPI,OAAO9K,UAAU+L,OAAS,SAAShE,UAC9BnJ,UAAUc,MAAMoD,WAAWiF,WAC9BlJ,KAAKiJ,GAAG,SAAUC,WAIpB+C,OAAO9K,UAAU0K,KAAO,WACvB3B,QAAQC,IAAI,sBACZpK,UAAUc,MAAMiE,YAAY9E,KAAKwG,GAAI,WACrCzG,UAAUc,MAAMiE,YAAY9E,KAAKwG,GAAI,WACrCzG,UAAUc,MAAM+D,SAAS5E,KAAKwG,GAAI,UAClC,IAAIqG,UAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,GACrDmJ,WAAY9M,UAAUc,MAAMoD,WAAW4I,SAASK,SACnDL,SAASK,UAIXjB,OAAO9K,UAAUgM,OAAS,SAASjE,UAC9BnJ,UAAUc,MAAMoD,WAAWiF,WAC9BlJ,KAAKiJ,GAAG,SAAUC,WAIpB+C,OAAO9K,UAAUiM,OAAS,WACzB,MAAOrN,WAAUc,MAAM0D,SAASvE,KAAKwG,GAAG,YAGzCyF,OAAO9K,UAAUyK,KAAO,WACvB1B,QAAQC,IAAI,qBACZ,IAAiB0C,SACjB9M,WAAUc,MAAMiE,YAAY9E,KAAKwG,GAAI,WACrCzG,UAAUc,MAAMiE,YAAY9E,KAAKwG,GAAI,WACrCzG,UAAUc,MAAM+D,SAAS5E,KAAKwG,GAAI,WAClCqG,SAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,IACjDmJ,UAAY9M,UAAUc,MAAMoD,WAAW4I,SAASM,SACnDN,SAASM,UAIXlB,OAAO9K,UAAUkM,cAAgB,SAASnE,UACrCnJ,UAAUc,MAAMoD,WAAWiF,WAC9BlJ,KAAKiJ,GAAG,gBAAiBC,WAI3B+C,OAAO9K,UAAU4K,MAAQ,WACxB7B,QAAQC,IAAI,sBACZ,IAAIhF,GAAgB0H,SAAb/I,KAAO9D,IACd6M,UAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,IACjDmJ,UAAY9M,UAAUc,MAAMoD,WAAW4I,SAASQ,iBACnDlI,EAAI0H,SAASQ,iBAEXlI,KAAM,GACRpF,UAAUgJ,SAASkB,WAAWjK,KAAK0D,GAAI,WACtCI,KAAKgJ,UAAUE,YAAYlJ,KAAK0C,OAKnCyF,OAAO9K,UAAU2I,SAAW,WAC3B,GAAIwD,YAAa1M,SAASP,qBAAqB,UAAWkN,QAAUD,WAAWA,WAAWzL,OAAS,EAEnG9B,WAAUgJ,SAASe,SAAS9J,KAAK0D,GAAI1D,MACrCuN,QAAQrG,aAAa,UAAWlH,KAAK0D,KAGtCuI,OAAO9K,UAAUqM,OAAS,WACzB,GAAI9C,KAAKD,OAAQO,OAAQyC,UA8BzB,OA5BCzC,QADgC,UAA7BnH,OAAO2H,SAASb,SACV9G,OAAO2H,SAASb,SAAW,KAAO9G,OAAO2H,SAASkC,SAElD7J,OAAO2H,SAASb,SAAW,KAAO9G,OAAO2H,SAASZ,KAG5D6C,YACCzC,OAASA,OACTiC,QAAUjN,KAAKiN,QAAQA,SAGxBjN,KAAKmM,QAAUpM,UAAUc,MAAM2H,UAAUxI,KAAKiN,QAAQd,SAEtDnM,KAAKwG,GAAKzG,UAAUc,MAAM2H,UAAUxI,KAAKiN,QAAQU,UAEjDlD,OAASzK,KAAKwM,YAEd/B,OAAOvD,aAAa,OAAQlH,KAAK0D,IAGhCgH,IADqC,KAAlC1K,KAAKiN,QAAQvC,IAAI/F,QAAQ,KACtB3E,KAAKiN,QAAQvC,IAAM,IAEnB1K,KAAKiN,QAAQvC,IAAI1D,UAAU,EAAEhH,KAAKiN,QAAQvC,IAAI/F,QAAQ,MAAQ,IAGrE+F,KAAYkD,mBAAmBlC,KAAKmC,UAAUJ,aAE9ChD,OAAOvD,aAAa,MAAOwD,KAEpBD,QAGDwB,QACLjM,MAEHD,UAAU+N,MAAQ,WAIjB,GAAIA,OAAQ,SAASb,SAMpB,GAJAlN,UAAUkM,OAAO8B,MAAM/N,KAAMiC,WAE7BjC,KAAKiN,QAAUlN,UAAUc,MAAMkB,UAAW+L,MAAM5B,SAASe,SAEzC5J,SAAZ4J,SAA+C5J,SAAtB4J,QAAQH,WAAiD,OAAtBG,QAAQH,UAEvE,MADA5C,SAAQC,IAAI,2BACL,CASR,IANgC,gBAAtB8C,SAAQH,UACjB9M,KAAK8M,UAAYlM,SAAS6L,cAAcQ,QAAQH,WACX,gBAAtBG,SAAQH,YACvB9M,KAAK8M,UAAYG,QAAQH,WAGtB9M,KAAK8M,WAAa9M,KAAK8M,UAAUjL,QAAU,EAC9C,OAAO,CAWR,IARA7B,KAAK8J,SAAS9J,KAAK0D,IAEnB1D,KAAKwN,SAELxN,KAAKyK,OAASzK,KAAKwM,YAEnBxM,KAAKsG,QAEDtG,KAAK8M,UAAW,CACnB,KAAO9M,KAAK8M,UAAUkB,iBACrBhO,KAAK8M,UAAUE,YAAYhN,KAAK8M,UAAUmB,UAG3CjO,MAAK8M,UAAUxM,YAAYN,KAAKwG,IAGjC,MAAOxG,MA4BR,OAzBA8N,OAAM5B,SAAWnM,UAAUc,MAAMkB,UAAWhC,UAAUkM,OAAOC,UAC5DgC,UAAW,EACXtC,MAAO,EACP+B,SAAW,kNACXV,aAKDlN,UAAUc,MAAMuB,QAAQ0L,MAAO/N,UAAUkM,QAEzC6B,MAAM3M,UAAU4K,MAAQ,WACvB7B,QAAQC,IAAI,sBACZ,IAAIhF,GAAgB0H,SAAb/I,KAAO9D,IACd6M,UAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,IACjDmJ,UAAY9M,UAAUc,MAAMoD,WAAW4I,SAASQ,iBACnDlI,EAAI0H,SAASQ,iBAEVlI,KAAM,GACTpF,UAAUgJ,SAASkB,WAAWjK,KAAK0D,GAAI,WACtCI,KAAKgJ,UAAUqB,OAAO,MAKlBL,OACL9N,MAEHD,UAAUqO,MAAQ,WAGjB,GAAIA,OAAQ,SAASnB,SACpB,GAAInJ,MAAO9D,IAKX,OAJAD,WAAUkM,OAAO8B,MAAM/N,KAAMiC,WAC7BjC,KAAKiN,QAAUlN,UAAUc,MAAMkB,UAAWqM,MAAMlC,SAASe,SACzDjN,KAAK8M,UAAYjJ,OAAOjD,SAAS6L,cAAc,QAE/BpJ,SAAZ4J,SACI,GAGLrM,SAAS6L,cAAc,cACzBzM,KAAK8M,UAAUuB,WAAWzN,SAAS6L,cAAc,cAE/C7L,SAAS6L,cAAc,uBACzBzM,KAAK8M,UAAUuB,WAAWzN,SAAS6L,cAAc,uBAGlDzM,KAAK8J,SAAS9J,KAAK0D,IAEf1D,KAAK8M,YACR9M,KAAKwN,SAELxN,KAAKyK,OAASzK,KAAKwM,YAEnBxM,KAAKsO,SAAW1N,SAASR,cAAc,OACvCL,UAAUc,MAAM+D,SAAS5E,KAAKsO,SAAS,uCAIvCtO,KAAKwG,GAAGiG,cAAc,aAAa8B,QAAU,WAC5CzK,KAAK+H,QAGN7L,KAAKwG,GAAG+H,QAAU,SAASvK,GACvBA,EAAEwK,SAAW1K,KAAK0C,IACpB1C,KAAK+H,QAIJ7L,KAAKiN,QAAQqB,UACftO,KAAK8M,UAAUxM,YAAYN,KAAKsO,UAGjCtO,KAAKsG,QAGLtG,KAAK8M,UAAUxM,YAAYN,KAAKwG,KAG1BxG,MA8DR,OA3DAoO,OAAMlC,SAAWnM,UAAUc,MAAMkB,UAAWhC,UAAUkM,OAAOC,UAC5DgC,UAAW,EACXtC,MAAO,EACP0C,UAAW,EACXX,SAAW,qXACXV,aAKDlN,UAAUc,MAAMuB,QAAQgM,MAAOrO,UAAUkM,QAEzCmC,MAAMjN,UAAUsN,WAAa,SAAS7H,MACrChG,SAAS8N,kBAAkB1O,KAAK0D,IAAI,GAAG8D,OAASZ,KAAO,MAGxDwH,MAAMjN,UAAUyK,KAAO,WAEtB,IAAI,GAAInK,KAAKzB,MAAKgK,SAASV,QACvBtJ,KAAKgK,SAASV,QAAQ7H,YAAc1B,WAAUqO,OAC7CpO,KAAKgK,SAASV,QAAQ7H,GAAG2L,UAC3BpN,KAAKgK,SAASV,QAAQ7H,GAAGoK,MAI5B9L,WAAUkM,OAAO9K,UAAUyK,KAAKmC,MAAM/N,KAAMiC,WACzCjC,KAAKiN,QAAQqB,WACfvO,UAAUc,MAAMiE,YAAY9E,KAAKsO,SAAU,WAC3CvO,UAAUc,MAAMiE,YAAY9E,KAAKsO,SAAU,WAC3CvO,UAAUc,MAAM+D,SAAS5E,KAAKsO,SAAU,aAI1CF,MAAMjN,UAAU0K,KAAO,WACtB9L,UAAUkM,OAAO9K,UAAU0K,KAAKkC,MAAM/N,KAAMiC,WACzCjC,KAAKiN,QAAQqB,WACfvO,UAAUc,MAAMiE,YAAY9E,KAAKsO,SAAU,WAC3CvO,UAAUc,MAAMiE,YAAY9E,KAAKsO,SAAU,WAC3CvO,UAAUc,MAAM+D,SAAS5E,KAAKsO,SAAU,aAI1CF,MAAMjN,UAAU4K,MAAQ,WACvB7B,QAAQC,IAAI,sBACZ,IAAIhF,GAAgB0H,SAAb/I,KAAO9D,IACd6M,UAAW9M,UAAUgJ,SAASc,kBAAkB7J,KAAK0D,IACjDmJ,UAAY9M,UAAUc,MAAMoD,WAAW4I,SAASQ,iBACnDlI,EAAI0H,SAASQ,iBAEXlI,KAAM,GACRpF,UAAUgJ,SAASkB,WAAWjK,KAAK0D,GAAI,WACtCI,KAAKgJ,UAAUE,YAAYlJ,KAAK0C,IAC7B1C,KAAKmJ,QAAQqB,UACfxK,KAAKgJ,UAAUE,YAAYlJ,KAAKwK,aAM7BF,OAELpO,MAEHD,UAAU4O,QAAU,WAGnB,GAAIA,SAAU,SAAS1B,SAKtB,MAJAlN,WAAUkM,OAAO8B,MAAM/N,KAAMiC,WAC7BjC,KAAKiN,QAAUlN,UAAUc,MAAMkB,UAAW4M,QAAQzC,SAASe,SAC3DjN,KAAK8M,UAAYjJ,OAAOjD,SAAS6L,cAAc,QAE/BpJ,SAAZ4J,SAA4C5J,SAAnB4J,QAAQuB,QAA2C,OAAnBvB,QAAQuB,QAC7D,GAGRxO,KAAK8J,SAAS9J,KAAK0D,IAEU,gBAAnBuJ,SAAQuB,OACjBxO,KAAKwO,OAAS5N,SAAS6L,cAAcQ,QAAQuB,QACX,gBAAnBvB,SAAQuB,SACvBxO,KAAKwO,OAASvB,QAAQuB,QAGnBxO,KAAKwO,QAAUxO,KAAKwO,OAAO3M,QAAU,GACjC,GAGR7B,KAAKwN,SAELxN,KAAKyK,OAASzK,KAAKwM,YAEnBxM,KAAKsG,QAEDtG,KAAK8M,WAER9M,KAAK8M,UAAUxM,YAAYN,KAAKwG,IAE1BxG,OA2ER,OAxEA2O,SAAQzC,SAAWnM,UAAUc,MAAMkB,UAAWhC,UAAUkM,OAAOC,UAC9DgC,UAAW,EACXtC,MAAO,EACPgD,UAAY,QACZjB,SAAW,sRACXV,aAKDlN,UAAUc,MAAMuB,QAAQuM,QAAS5O,UAAUkM,QAG3C0C,QAAQxN,UAAUmF,MAAQ,WACzB,GAAIsI,WAAY5O,KAAKiN,QAAQ2B,SACzBA,aACHA,UAAY,SAEb7O,UAAUc,MAAM+D,SAAS5E,KAAKwG,GAAI,MAAQoI,WAC1C7O,UAAUkM,OAAO9K,UAAUmF,MAAMyH,MAAM/N,KAAMiC,YAG9C0M,QAAQxN,UAAU0N,eAAiB,WAClC,GAAI9K,KAAIiE,KAAKL,OAAS5H,UAAUc,MAAM8G,OAAO3H,KAAKwO,QACjDM,GAAM/O,UAAUc,MAAM0F,OAAOvG,KAAKwO,QAClChI,GAAKzG,UAAUc,MAAM0F,OAAOvG,KAAKwG,GAEJ,UAA3BxG,KAAKiN,QAAQ2B,WACf7K,IAAM4D,OAAO5D,IAAMgL,KAAKC,MAAMF,GAAGtH,OAAS,GAAKuH,KAAKC,MAAMxI,GAAGgB,OAAS,GACtEQ,KAAOL,OAAOK,KAAOxB,GAAGa,OACW,QAA3BrH,KAAKiN,QAAQ2B,WACrB7K,IAAO4D,OAAO5D,IAAMyC,GAAGgB,OACvBQ,KAAOL,OAAOK,KAAO+G,KAAKC,MAAMF,GAAGzH,MAAQ,GAAK0H,KAAKC,MAAMxI,GAAGa,MAAQ,IACnC,WAA3BrH,KAAKiN,QAAQ2B,WACrB7K,IAAO4D,OAAO5D,IAAM+K,GAAGtH,OACvBQ,KAAOL,OAAOK,KAAO+G,KAAKC,MAAMF,GAAGzH,MAAQ,GAAK0H,KAAKC,MAAMxI,GAAGa,MAAQ,KAGtEtD,IAAM4D,OAAO5D,IAAMgL,KAAKC,MAAMF,GAAGtH,OAAS,GAAKuH,KAAKC,MAAMxI,GAAGgB,OAAS,GACtEQ,KAAOL,OAAOK,KAAO8G,GAAGzH,OAEzBrH,KAAKwG,GAAGU,aAAa,iBAAiB,QAAUnD,IAAM,YAAciE,KAAO,OAC3EjI,UAAUc,MAAMgE,WAAW7E,KAAKwG,KAGjCmI,QAAQxN,UAAUyK,KAAO,WACxB,GAAI9H,MAAO9D,IACRA,MAAKiP,UACPC,cAAclP,KAAKiP,UAEpBjP,KAAK6O,iBACL7O,KAAKiP,SAAWE,YAAY,WAC3BrL,KAAK+K,kBACJ,KAEF9O,UAAUkM,OAAO9K,UAAUyK,KAAKmC,MAAM/N,KAAMiC,YAG7C0M,QAAQxN,UAAU0K,KAAO,WACrB7L,KAAKiP,UACPC,cAAclP,KAAKiP,UAEpBlP,UAAUkM,OAAO9K,UAAU0K,KAAKkC,MAAM/N,KAAMiC,YAG7C0M,QAAQxN,UAAU4K,MAAQ,WACtB/L,KAAKiP,UACPC,cAAclP,KAAKiP,UAEpBlP,UAAUkM,OAAO9K,UAAU4K,MAAMgC,MAAM/N,KAAMiC,YAGvC0M,SAEL3O,MAEH,WAEC,GAoCEsN,YAAsB5K,OAAQ0H,OApC5BrI,OAAS,SAASqN,WAAYC,aACjC,GAAIC,OAAqBC,UAAfjE,OAAStL,IAkCnB,OA5BCsP,OADGF,YAAerP,UAAUc,MAAME,IAAIqO,WAAY,eAC1CA,WAAW5M,YAEX,WACP,MAAO8I,QAAOyC,MAAM/N,KAAMiC,YAK5BlC,UAAUc,MAAMkB,OAAOuN,MAAOhE,OAAQ+D,aAItCE,UAAY,WACXvP,KAAKwC,YAAc8M,OAEpBC,UAAUpO,UAAYmK,OAAOnK,UAC7BmO,MAAMnO,UAAY,GAAIoO,WAIlBH,YACHrP,UAAUc,MAAMkB,OAAOuN,MAAMnO,UAAWiO,YAKzCE,MAAME,UAAYlE,OAAOnK,UAElBmO,MAGRvP,WAAU+N,MAAM/L,OAAShC,UAAUqO,MAAMrM,OAAShC,UAAU4O,QAAQ5M,OAAShC,UAAUoL,OAAOpJ,OAASA,OAKlGhC,UAAUc,MAAM+C,WAmBpBsG,QAAQC,IAAI,6BAlBZD,QAAQC,IAAI,6BACZmD,WAAa1M,SAAS6O,cACtBrF,OAASxJ,SAASR,cAAc,KAChCgK,OAAOI,KAAO8C,WAAWjH,aAAa,OACtC3D,OAAU3C,UAAUc,MAAM6B,OAAO0H,OAAOqB,MAExCvB,QAAQC,IAAIzH,QAEZ3C,UAAUgJ,SAASS,OAEdzJ,UAAUc,MAAMiB,QAAQY,UACxBA,OAAOoK,YACVpK,OAAOoK,UAAYQ,WAAWP,YAG/B,IAAKhN,UAAU+N,MAAM/L,YAAYW,WAQjC1C,MAGID,WACLC,KAEH,OAAOD","sourcesContent":["/*\n * Widgetfly\n * A javascript library for building cross-site web widgets.\n * @link https://github.com/qpe/widgetfly\n * @author hsfeng\n * @version 0.1.0\n * @license https://github.com/qpe/widgetfly/blob/master/LICENSE\n * @copyright hsfeng\n */\n(function(root, factory) {'use strict';\n\t\tif ( typeof define === 'function' && define.amd) {\n\t\t\t// AMD. Register as an anonymous module.\n\t\t\tdefine([], function() {\n\t\t\t\t// Also create a global in case some scripts\n\t\t\t\t// that are loaded still are looking for\n\t\t\t\t// a global even when an AMD loader is in use.\n\t\t\t\treturn (root.Widgetfly = factory(root));\n\t\t\t});\n\t\t} else {\n\t\t\t// Browser globals\n\t\t\troot.Widgetfly = factory(root);\n\t\t}\n\t}(this, function(global) {\n\t\t'use strict';\n\t\tvar Widgetfly = (function(global){\n\t\t\t'use strict';\n\t\t\tvar Widgetfly = {};\n\t\t\t\n\t\t\t(function (doc, cssText) {\n\t\t\t    var styleEl = doc.createElement(\"style\");\n\t\t\t    doc.getElementsByTagName(\"head\")[0].appendChild(styleEl);\n\t\t\t    if (styleEl.styleSheet) {\n\t\t\t        if (!styleEl.styleSheet.disabled) {\n\t\t\t            styleEl.styleSheet.cssText = cssText;\n\t\t\t        }\n\t\t\t    } else {\n\t\t\t        try {\n\t\t\t            styleEl.innerHTML = cssText;\n\t\t\t        } catch (ignore) {\n\t\t\t            styleEl.innerText = cssText;\n\t\t\t        }\n\t\t\t    }\n\t\t\t}(document, \".widgetfly .wf-show,.widgetfly.wf-show{display:block !important}.widgetfly .wf-hide,.widgetfly.wf-hide{display:none !important}.widgetfly .wf-root,.widgetfly.wf-root{position:absolute;left:0;top:-9999px;width:47px;height:29px;z-index:999999999}.widgetfly .wf-spinner,.widgetfly.wf-spinner{width:70px;text-align:center}.widgetfly .wf-spinner div,.widgetfly.wf-spinner div{width:18px;height:18px;background-color:#333;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.widgetfly .wf-spinner .wf-bounce1,.widgetfly.wf-spinner .wf-bounce1{-webkit-animation-delay:-0.32s;animation-delay:-0.32s}.widgetfly .wf-spinner .wf-bounce2,.widgetfly.wf-spinner .wf-bounce2{-webkit-animation-delay:-0.16s;animation-delay:-0.16s}@-webkit-keyframes bouncedelay{0%,80%,100%{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes bouncedelay{0%,80%,100%{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}.widgetfly .wf-panel,.widgetfly.wf-panel{width:100% !important;border:none !important;overflow:hidden !important}.widgetfly .wf-modal,.widgetfly.wf-modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;outline:0;opacity:1}.widgetfly .wf-modal .wf-modal-dialog,.widgetfly.wf-modal .wf-modal-dialog{-webkit-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);position:relative;margin:30px auto;width:600px}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 15px rgba(0,0,0,0.5);box-shadow:0 5px 15px rgba(0,0,0,0.5);background-clip:padding-box;outline:0}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content .wf-modal-body,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content .wf-modal-body{position:relative}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content .wf-close,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content .wf-close{position:absolute;right:0;margin-top:-2px;margin-right:5px;text-decoration:none;font-size:21px;font-weight:500;line-height:1;color:#000;text-shadow:0 1px 0 #fff;cursor:pointer;filter:alpha(opacity=50);opacity:.5;font-family:\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;z-index:1050}.wf-modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000;filter:alpha(opacity=50);opacity:.5}.widgetfly .wf-popover,.widgetfly.wf-popover{top:0;left:0;z-index:1010;display:none;padding:1px;text-align:left;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);white-space:normal;position:absolute;display:block;float:left;width:260px}.widgetfly .wf-popover .wf-arrow,.widgetfly.wf-popover .wf-arrow{border-width:11px}.widgetfly .wf-popover .wf-arrow,.widgetfly.wf-popover .wf-arrow,.widgetfly .wf-popover .wf-arrow:after,.widgetfly.wf-popover .wf-arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid;content:\\\"\\\";border-width:10px}.widgetfly .wf-popover.wf-top,.widgetfly.wf-popover.wf-top{margin-bottom:10px}.widgetfly .wf-popover.wf-top .wf-arrow,.widgetfly.wf-popover.wf-top .wf-arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.widgetfly .wf-popover.wf-top .wf-arrow:after,.widgetfly.wf-popover.wf-top .wf-arrow:after{bottom:1px;margin-left:-10px;content:\\\" \\\";border-top-color:#fff;border-bottom-width:0}.widgetfly .wf-popover.wf-left,.widgetfly.wf-popover.wf-left{margin-right:10px}.widgetfly .wf-popover.wf-left .wf-arrow,.widgetfly.wf-popover.wf-left .wf-arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,0.25)}.widgetfly .wf-popover.wf-left .wf-arrow:after,.widgetfly.wf-popover.wf-left .wf-arrow:after{right:1px;bottom:-10px;content:\\\" \\\";border-right-width:0;border-left-color:#fff}.widgetfly .wf-popover.wf-bottom,.widgetfly.wf-popover.wf-bottom{margin-top:10px}.widgetfly .wf-popover.wf-bottom .wf-arrow,.widgetfly.wf-popover.wf-bottom .wf-arrow{top:-11px;left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25)}.widgetfly .wf-popover.wf-bottom .wf-arrow:after,.widgetfly.wf-popover.wf-bottom .wf-arrow:after{top:1px;margin-left:-10px;content:\\\" \\\";border-top-width:0;border-bottom-color:#fff}.widgetfly .wf-popover.wf-right,.widgetfly.wf-popover.wf-right{margin-left:10px}.widgetfly .wf-popover.wf-right .wf-arrow,.widgetfly.wf-popover.wf-right .wf-arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.widgetfly .wf-popover.wf-right .wf-arrow:after,.widgetfly.wf-popover.wf-right .wf-arrow:after{bottom:-10px;left:1px;content:\\\" \\\";border-right-color:#fff;border-left-width:0}\"));\n\t\t\t\n\t\t\tWidgetfly.Utils = (function(global) {'use strict';\n\t\t\t\t// Utilities\n\t\t\t\t// -------------\n\t\t\t\n\t\t\t\tvar idCounter = 0, Utils = {\n\t\t\t\t\thas : function(obj, key) {\n\t\t\t\t\t\treturn Object.prototype.hasOwnProperty.call(obj, key);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\teach : function(obj, iterator, context) {\n\t\t\t\t\t\tvar i, l, key;\n\t\t\t\n\t\t\t\t\t\tif (obj === null) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\tif (Array.prototype.forEach && obj.forEach === Array.prototype.forEach) {\n\t\t\t\t\t\t\tobj.forEach(iterator, context);\n\t\t\t\t\t\t} else if ( typeof obj.length === 'number') {\n\t\t\t\t\t\t\tfor ( i = 0, l = obj.length; i < l; i++) {\n\t\t\t\t\t\t\t\tif (iterator.call(context, obj[i], i, obj) === {}) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (key in obj) {\n\t\t\t\t\t\t\t\tif (Widgetfly.Utils.has(obj, key)) {\n\t\t\t\t\t\t\t\t\tif (iterator.call(context, obj[key], key, obj) === {}) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisEmpty : function(obj) {\n\t\t\t\t\t\t// null and undefined are \"empty\"\n\t\t\t\t\t\tif (obj === null) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t// Assume if it has a length property with a non-zero value\n\t\t\t\t\t\t// that that property is correct.\n\t\t\t\t\t\tif (obj.length > 0) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\tif (obj.length === 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t// Otherwise, does it have any properties of its own?\n\t\t\t\t\t\t// Note that this doesn't handle\n\t\t\t\t\t\t// toString and valueOf enumeration bugs in IE < 9\n\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\textend : function(obj) {\n\t\t\t\t\t\tthis.each(Array.prototype.slice.call(arguments, 1), function(source) {\n\t\t\t\t\t\t\tif (source) {\n\t\t\t\t\t\t\t\tfor (var prop in source) {\n\t\t\t\t\t\t\t\t\tobj[prop] = source[prop];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tinherit : function(Child, Parent) {\n\t\t\t\t\t\tvar F = function() {\n\t\t\t\t\t\t};\n\t\t\t\t\t\tF.prototype = Parent.prototype;\n\t\t\t\t\t\tChild.prototype = new F();\n\t\t\t\t\t\tChild.prototype.constructor = Child;\n\t\t\t\t\t\tChild.uber = Parent.prototype;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\t/**\n\t\t\t\t\t * Parse and stringify URL query strings\n\t\t\t\t\t * copy from https://github.com/sindresorhus/query-stringby \n\t\t\t\t\t */\n\t\t\t\t\tparams : function (str) {\n\t\t\t\t\t\tif (typeof str !== 'string') {\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\tstr = str.trim().replace(/^(\\?|#)/, '');\n\t\t\t\t\n\t\t\t\t\t\tif (!str) {\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\treturn str.trim().split('&').reduce(function (ret, param) {\n\t\t\t\t\t\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t\t\t\t\t\tvar key = parts[0];\n\t\t\t\t\t\t\tvar val = parts[1];\n\t\t\t\t\n\t\t\t\t\t\t\tkey = decodeURIComponent(key);\n\t\t\t\t\t\t\t// missing `=` should be `null`:\n\t\t\t\t\t\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\t\t\t\t\t\tval = val === undefined ? null : decodeURIComponent(val);\n\t\t\t\t\n\t\t\t\t\t\t\tif (!ret.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tret[key] = val;\n\t\t\t\t\t\t\t} else if (Array.isArray(ret[key])) {\n\t\t\t\t\t\t\t\tret[key].push(val);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tret[key] = [ret[key], val];\n\t\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t\treturn ret;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tuniqueId : function(prefix) {\n\t\t\t\t\t\tvar id = String(++idCounter);\n\t\t\t\t\t\treturn prefix ? prefix + id : id;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tinIframe : function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn window.self !== window.top;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisFunction : function(obj) {\n\t\t\t\t\t\treturn typeof obj === 'function';\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisElement : function(o) {\n\t\t\t\t\t\treturn ( typeof HTMLElement === 'object' ? o instanceof HTMLElement : o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string');\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\thasClass : function(element, cls) {\n\t\t\t\t\t\treturn (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\taddClass : function(element, className) {\n\t\t\t\t\t\tif (!this.hasClass(element, className)) {\n\t\t\t\t\t\t\telement.className += ' ' + className;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(element);\n\t\t\t\t\t},\n\t\t\t\t\n\t\t\t\t\tremoveClass : function(element, rmClass) {\n\t\t\t\t\t\tvar newClass;\n\t\t\t\t\t\tif (element !== undefined && this.isElement(element)) {\n\t\t\t\t\t\t\tnewClass = ' ' + element.className.replace(/[\\t\\r\\n]/g, ' ') + ' ';\n\t\t\t\t\t\t\tif (this.hasClass(element, rmClass)) {\n\t\t\t\t\t\t\t\twhile (newClass.indexOf(' ' + rmClass + ' ') >= 0) {\n\t\t\t\t\t\t\t\t\tnewClass = newClass.replace(' ' + rmClass + ' ', ' ');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telement.className = newClass.replace(/^\\s+|\\s+$/g, '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(element);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\ttoggleClass : function(element, className) {\n\t\t\t\t\t\tvar newClass;\n\t\t\t\t\t\tif (element !== undefined && this.isElement(element)) {\n\t\t\t\t\t\t\tnewClass = ' ' + element.className.replace(/[\\t\\r\\n]/g, ' ') + ' ';\n\t\t\t\t\t\t\tif (this.hasClass(element, className)) {\n\t\t\t\t\t\t\t\twhile (newClass.indexOf(' ' + className + ' ') >= 0) {\n\t\t\t\t\t\t\t\t\tnewClass = newClass.replace(' ' + className + ' ', ' ');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telement.className = newClass.replace(/^\\s+|\\s+$/g, '');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telement.className += ' ' + className;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(element);\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tinnerStyle : function css(a) {\n\t\t\t\t\t    var i,r, match, ruleExp, result,styles = [],rules, sheets = document.styleSheets, o = [];\n\t\t\t\t\t    a.matches = a.matches || a.webkitMatchesSelector || a.mozMatchesSelector || a.msMatchesSelector || a.oMatchesSelector;\n\t\t\t\t\t    for (i in sheets) {\n\t\t\t\t\t        rules = sheets[i].rules || sheets[i].cssRules;\n\t\t\t\t\t        for (r in rules) {\n\t\t\t\t\t            if (a.matches(rules[r].selectorText)) {\n\t\t\t\t\t                o.push(rules[r].cssText);\n\t\t\t\t\t            }\n\t\t\t\t\t        }\n\t\t\t\t\t    }\n\t\t\t\t\t    for (i in o){\n\t\t\t\t\t\t\tr = o[i];\n\t\t\t\t\t\t\tif(r.indexOf('.widgetfly') === 0){\n\t\t\t\t\t\t\t\truleExp = /\\{\\s*([^\\}]+)\\s\\}/g;\n\t\t\t\t\t\t\t\tmatch = ruleExp.exec(r);\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tstyles.push(match[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t\t\t\t    result = styles.join(' ');\n\t\t\t\t\t    if(a.hasAttribute('data-ext-style')){\n\t\t\t\t\t\t\tresult = result + ' ' + a.getAttribute('data-ext-style');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta.style.cssText = result;\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tactual : function(el){\n\t\t\t\t\t\tvar elWidth,elHeight,style,\n\t\t\t\t\t\tfixStyle = ' visibility: hidden !important; display: block !important; position: absolute !important;',\n\t\t\t\t\t\tsize = function(s){\n\t\t\t\t\t\t\t\tif(Boolean(s)){\n\t\t\t\t\t\t\t\t\treturn parseInt(s.substring(0,s.indexOf('px')),10);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (el.offsetParent === null) {\n\t\t\t\t\t\t\tel.setAttribute('style', el.getAttribute('style') + fixStyle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\telWidth = el.offsetWidth;\n\t\t\t\t\t\t\n\t\t\t\t\t\telHeight = el.offsetHeight;\n\t\t\t\t\t\t\n\t\t\t\t\t\tstyle = el.getAttribute('style');\n\t\t\t\t\t\tif(style && style.indexOf(fixStyle) !== 0){\n\t\t\t\t\t\t\tel.setAttribute('style', style.substring(0,style.indexOf(fixStyle)));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\twidth : elWidth + size(el.style.marginLeft) + size(el.style.marginRight),\n\t\t\t\t\t\t\theight : elHeight + size(el.style.marginTop) + size(el.style.marginBottom)\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\toffset: function(el) {\n\t\t\t\t\t\tvar docElem, win,\n\t\t\t\t\t\telem = el,\n\t\t\t\t\t\tbox = { top: 0, left: 0 },\n\t\t\t\t\t\tdoc = elem && elem.ownerDocument;\n\t\t\t\n\t\t\t\t\t\tif ( !doc ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\tdocElem = doc.documentElement;\n\t\t\t\t\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\t\t\t\t\t// BlackBerry 5, iOS 3 (original iPhone)\n\t\t\t\t\t\tif ( typeof elem.getBoundingClientRect !== undefined ) {\n\t\t\t\t\t\t\tbox = elem.getBoundingClientRect();\n\t\t\t\t\t\t}\n\t\t\t\t\t\twin = window;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\t\t\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\ttoElement : function(content){\n\t\t\t\t\t\tvar el = document.createElement('div');\n\t\t\t\t\t\tel.innerHTML = content;\n\t\t\t\t\t\treturn el.firstChild;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Utils;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Events = (function(global) {'use strict';\n\t\t\t\t// Events\n\t\t\t\t// -------------\n\t\t\t\tvar Events = function() {\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.trigger = function(action, data) {\n\t\t\t\t\tWidgetfly.Mediator.send(this.id, action, data);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.on = function(action, callback) {\n\t\t\t\t\tWidgetfly.Mediator.bind(this.id, action, callback);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.off = function(action) {\n\t\t\t\t\tWidgetfly.Mediator.unbind(this.id, action);\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Events;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Mediator = (function(global) {'use strict';\n\t\t\t\t// Mediator\n\t\t\t\t// -------------\n\t\t\t\tvar Mediator = {\n\t\t\t\n\t\t\t\t\twidgets : {},\n\t\t\t\n\t\t\t\t\tactionHandlers : {},\n\t\t\t\n\t\t\t\t\tinit : function() {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\twindow.addEventListener('message', function(msgObj) {\n\t\t\t\t\t\t\tself.receive(msgObj);\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tgetWidget : function(id) {\n\t\t\t\t\t\treturn this.widgets[id];\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tgetActionHandlers : function(id) {\n\t\t\t\t\t\treturn this.actionHandlers[id];\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tregister : function(id, widget) {\n\t\t\t\t\t\tthis.widgets[widget.id] = widget;\n\t\t\t\t\t\twidget.mediator = this;\n\t\t\t\t\t\tthis.actionHandlers[widget.id] = {};\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tunregister : function(id, callback) {\n\t\t\t\t\t\tif (this.actionHandlers[id] !== undefined) {\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tWidgetfly.Utils.each(this.actionHandlers[id], function(key) {\n\t\t\t\t\t\t\t\tdelete self.actionHandlers[id][key];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this.widgets[id];\n\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tsend : function(id, action, data) {\n\t\t\t\t\t\tconsole.log('Mediator.send');\n\t\t\t\n\t\t\t\t\t\tvar parser, targetOrigin, corsObj = {\n\t\t\t\t\t\t\tmsg : data,\n\t\t\t\t\t\t\taction : action,\n\t\t\t\t\t\t\tid : id\n\t\t\t\t\t\t}, widget = this.widgets[id];\n\t\t\t\n\t\t\t\t\t\tif (widget) {\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = widget.iframe.src;\n\t\t\t\t\t\t\ttargetOrigin = parser.protocol + '//' + parser.host;\n\t\t\t\t\t\t\twidget.iframe.contentWindow.postMessage(corsObj, targetOrigin);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tbind : function(id, action, callback) {\n\t\t\t\t\t\tconsole.log('Mediator.bind: ' + action);\n\t\t\t\t\t\tif (this.actionHandlers[id] === undefined) {\n\t\t\t\t\t\t\tthis.actionHandlers[id] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.actionHandlers[id][action] = callback;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tunbind : function(id, action) {\n\t\t\t\t\t\tconsole.log('Mediator.unbind');\n\t\t\t\t\t\tdelete this.actionHandlers[id][action];\n\t\t\t\t\t\tif (Object.keys(this.actionHandlers[id]).length <= 0) {\n\t\t\t\t\t\t\tdelete this.actionHandlers[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\treceive : function(msgObj) {\n\t\t\t\t\t\tconsole.log('Mediator.receive');\n\t\t\t\n\t\t\t\t\t\tvar origin, parser, widgetId = msgObj.data.id, widget = this.widgets[widgetId], myActionHandlers = this.actionHandlers[widgetId], action = msgObj.data.action;\n\t\t\t\n\t\t\t\t\t\tif (widget) {\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = widget.iframe.src;\n\t\t\t\t\t\t\torigin = parser.protocol + '//' + parser.host;\n\t\t\t\n\t\t\t\t\t\t\tif (origin !== msgObj.origin) {\n\t\t\t\t\t\t\t\tconsole.log('Widget ignore message from ' + msgObj.origin);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t\tif (widget && Widgetfly.Utils.isFunction(widget[action])) {\n\t\t\t\t\t\t\t\twidget[action](msgObj.data.msg);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(myActionHandlers) && Widgetfly.Utils.isFunction(myActionHandlers[action])) {\n\t\t\t\t\t\t\t\t\tmyActionHandlers[action](msgObj.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Mediator;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Server = (function(global) {'use strict';\n\t\t\t\t// Server\n\t\t\t\t// -------------\n\t\t\t\tvar Server = function() {\n\t\t\t\t\tthis.id = window.name;\n\t\t\t\t\tthis.events = {};\n\t\t\t\t\tthis.init();\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Server, Widgetfly.Events);\n\t\t\t\n\t\t\t\tServer.prototype.init = function() {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tthis.trigger('start');\n\t\t\t\t\twindow.addEventListener('message', function(msgObj) {\n\t\t\t\t\t\tif(window.parent){\n\t\t\t\t\t\t\tvar action, origin, parser, params,paramData = decodeURIComponent(window.location.hash.substring(1));\n\t\t\t\t\t\t\tparams = JSON.parse(paramData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = params.origin;\n\t\t\t\t\t\t\torigin = parser.protocol + '//' + parser.host;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(origin !== 'file://' && origin !== msgObj.origin){\n\t\t\t\t\t\t\t\tconsole.log('Server ignore message from ' + msgObj.origin);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taction = msgObj.data.action;\n\t\t\t\t\t\t\tif (Widgetfly.Utils.isFunction(self[action])) {\n\t\t\t\t\t\t\t\tself[action](msgObj.data.msg);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(self.events) && Widgetfly.Utils.isFunction(self.events[action])) {\n\t\t\t\t\t\t\t\t\tself.events[action](msgObj.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.on = function(key, callback) {\n\t\t\t\t\tthis.events[key] = callback;\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.off = function(key) {\n\t\t\t\t\tdelete this.events[key];\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.trigger = function(action, data) {\n\t\t\t\t\tconsole.log('Server.trigger');\n\t\t\t\t\tvar corsObj = {\n\t\t\t\t\t\tmsg : data,\n\t\t\t\t\t\taction : action,\n\t\t\t\t\t\tid : this.id\n\t\t\t\t\t}, params = JSON.parse(decodeURIComponent(window.location.hash.substring(1)));\n\t\t\t\t\t\n\t\t\t\t\t//console.log(corsObj);\n\t\t\t\t\tparent.postMessage(corsObj, params.origin);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.show = function() {\n\t\t\t\t\tthis.trigger('show');\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.hide = function() {\n\t\t\t\t\tthis.trigger('hide');\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.onClose = function(callback) {\n\t\t\t\t\tconsole.log('Server onClose action');\n\t\t\t\t\tcallback();\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.close = function() {\n\t\t\t\t\tconsole.log('Prepare server close action');\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tWidgetfly.Utils.each(this.events, function(key) {\n\t\t\t\t\t\tdelete self.events[key];\n\t\t\t\t\t});\n\t\t\t\n\t\t\t\t\tthis.onClose(function() {\n\t\t\t\t\t\tconsole.log('Server close action');\n\t\t\t\t\t\tself.trigger('close');\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\n\t\t\t\t/*\n\t\t\t\t Server.prototype.setAutoGrow = function(width, height) {\n\t\t\t\t //console.log(size);\n\t\t\t\t Events.trigger(window.name, 'sizeChange', width, height);\n\t\t\t\t };\n\t\t\t\t */\n\t\t\t\tServer.prototype.setSize = function(width, height) {\n\t\t\t\t\t//console.log(size);\n\t\t\t\t\tWidgetfly.Events.trigger(window.name, 'sizeChange', width, height);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\treturn Server;\n\t\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Widget = (function(global) {'use strict';\n\t\t\t\t// Widget\n\t\t\t\t// -------------\n\t\t\t\tvar Widget = function() {\n\t\t\t\t\tthis.id = Widgetfly.Utils.uniqueId('widget');\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.DEFAULTS = Widgetfly.Utils.extend({},{\n\t\t\t\t\tspinner : '<div class=\"widgetfly wf-spinner\"><div class=\"wf-bounce1\"></div><div class=\"wf-bounce2\"></div><div class=\"wf-bounce3\"></div></div>'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Widget, Widgetfly.Events);\n\t\t\t\n\t\t\t\tWidget.prototype.getId = function() {\n\t\t\t\t\treturn this.id;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.prototype.style = function() {\n\t\t\t\t\tvar r = function(el){\n\t\t\t\t\t\tif(el.className){\n\t\t\t\t\t\t\tWidgetfly.Utils.addClass(el, el.className);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar i,j, nodes = el.childNodes;\n\t\t\t\t\t\tfor(i in nodes){\n\t\t\t\t\t\t\tif(nodes[i].className && (nodes[i].className.indexOf('widgetfly') === 0 || nodes[i].className.indexOf('wf-') === 0)){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tWidgetfly.Utils.addClass(nodes[i], nodes[i].className);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nodes[i].childNodes){\n\t\t\t\t\t\t\t\tfor(j in nodes[i].childNodes){\n\t\t\t\t\t\t\t\t\tr(nodes[i].childNodes[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tr(this.el);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.prototype.getIframe = function(){\n\t\t\t\t\tvar iframe = this.el.querySelector('iframe');\n\t\t\t\t\tif(!iframe){\n\t\t\t\t\t\tif(this.el.tagName === 'IFRAME'){\n\t\t\t\t\t\t\tiframe = this.el;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn iframe;\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onStart = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onStart', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.start = function() {\n\t\t\t\t\tconsole.log('Widget.Action start');\n\t\t\t\t\tvar handlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onStart)) {\n\t\t\t\t\t\thandlers.onStart();\n\t\t\t\t\t}\n\t\t\t\t\tif(this.spinner){\n\t\t\t\t\t\tif(this.container === this.spinner.parentNode){\n\t\t\t\t\t\t\tthis.container.removeChild(this.spinner);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(this.options.show){\n\t\t\t\t\t\tthis.show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onHide = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onHide', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.hide = function() {\n\t\t\t\t\tconsole.log('Widget.Action hide');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-show');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-hide');\n\t\t\t\t\tvar handlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onHide)) {\n\t\t\t\t\t\thandlers.onHide();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onShow = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onShow', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.prototype.isShow = function() {\n\t\t\t\t\treturn Widgetfly.Utils.hasClass(this.el,'wf-show');\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.show = function() {\n\t\t\t\t\tconsole.log('Widget.Action show');\n\t\t\t\t\tvar self = this, handlers;\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-show');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-show');\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onShow)) {\n\t\t\t\t\t\thandlers.onShow();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onBeforeClose = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onBeforeClose', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif(r !== false){\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.removeChild(self.el);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.register = function() {\n\t\t\t\t\tvar nowScripts = document.getElementsByTagName('script'), cScript = nowScripts[nowScripts.length - 1];\n\t\t\t\t\t//console.log(this);\n\t\t\t\t\tWidgetfly.Mediator.register(this.id, this);\n\t\t\t\t\tcScript.setAttribute('data-id', this.id);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.render = function() {\n\t\t\t\t\tvar src, iframe, origin, urlOptions;\n\t\t\t\t\tif (window.location.protocol === 'file:') {\n\t\t\t\t\t\torigin = window.location.protocol + '//' + window.location.pathname;\n\t\t\t\t\t} else {\n\t\t\t\t\t\torigin = window.location.protocol + '//' + window.location.host;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\turlOptions = {\n\t\t\t\t\t\torigin : origin,\n\t\t\t\t\t\toptions : this.options.options\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tthis.spinner = Widgetfly.Utils.toElement(this.options.spinner);\n\t\t\t\t\t\n\t\t\t\t\tthis.el = Widgetfly.Utils.toElement(this.options.template);\n\t\t\t\t\t\n\t\t\t\t\tiframe = this.getIframe();\n\t\t\t\n\t\t\t\t\tiframe.setAttribute('name', this.id);\n\t\t\t\t\t\n\t\t\t\t\tif (this.options.src.indexOf('#') === -1) {\n\t\t\t\t\t\tsrc = this.options.src + '#';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsrc = this.options.src.substring(0,this.options.src.indexOf('#')) + '#';\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsrc = src + encodeURIComponent(JSON.stringify(urlOptions));\n\t\t\t\t\t\n\t\t\t\t\tiframe.setAttribute('src', src);\n\t\t\t\n\t\t\t\t\treturn iframe;\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Widget;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Panel = (function(global) {'use strict';\n\t\t\t\n\t\t\t\t// Widgetfly.Panel\n\t\t\t\t// -------------\n\t\t\t\tvar Panel = function(options) {\n\t\t\t\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\t\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Panel.DEFAULTS,options);\n\t\t\t\n\t\t\t\t\tif (options === undefined || options.container === undefined || options.container === null) {\n\t\t\t\t\t\tconsole.log('container not defined.');\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(typeof options.container === 'string'){\n\t\t\t\t\t\tthis.container = document.querySelector(options.container);\n\t\t\t\t\t}else if(typeof options.container === 'object'){\n\t\t\t\t\t\tthis.container = options.container;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.container && this.container.length <= 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tthis.render();\n\t\t\t\n\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\n\t\t\t\t\tthis.style();\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\twhile (this.container.hasChildNodes()) {\n\t\t\t\t\t\t\tthis.container.removeChild(this.container.lastChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPanel.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\ttemplate : '<iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"widgetfly wf-panel wf-hide\"></iframe>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Panel, Widgetfly.Widget);\n\t\t\t\n\t\t\t\tPanel.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif (r !== false) {\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.remove(0);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Panel;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Modal = (function(global) {'use strict';\n\t\t\t\t// Widgetfly.Modal\n\t\t\t\t// -------------\n\t\t\t\tvar Modal = function(options) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Modal.DEFAULTS,options);\n\t\t\t\t\tthis.container = window.document.querySelector('body');\n\t\t\t\t\t\n\t\t\t\t\tif (options === undefined) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(document.querySelector('.wf-modal')){\n\t\t\t\t\t\tthis.container.removChild(document.querySelector('.wf-modal'));\n\t\t\t\t\t}\n\t\t\t\t\tif(document.querySelector('.wf-modal-backdrop')){\n\t\t\t\t\t\tthis.container.removChild(document.querySelector('.wf-modal-backdrop'));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.backdrop = document.createElement('div');\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop,'widgetfly wf-modal-backdrop wf-hide');\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t//bind close event\n\t\t\t\t\t\tthis.el.querySelector('.wf-close').onclick = function() {\n\t\t\t\t\t\t\tself.hide();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.el.onclick = function(e){\n\t\t\t\t\t\t\tif(e.target === self.el){\n\t\t\t\t\t\t\t\tself.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.options.backdrop){\n\t\t\t\t\t\t\tthis.container.appendChild(this.backdrop);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.style();\n\t\t\t\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\tbackdrop : true,\n\t\t\t\t\ttemplate : '<div class=\"widgetfly wf-modal wf-hide\"><div class=\"wf-modal-dialog\"><div class=\"wf-modal-content\"><a class=\"wf-close\" href=\"javascript:void(0)\">x</a><iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"wf-modal-body wf-show\"></iframe></div></div></div>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Modal, Widgetfly.Widget);\n\t\t\t\n\t\t\t\tModal.prototype.sizeChange = function(size) {\n\t\t\t\t\tdocument.getElementsByName(this.id)[0].height = size + 'px';\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.show = function() {\n\t\t\t\t\t//show only one modal at a time\n\t\t\t\t\tfor(var i in this.mediator.widgets){\n\t\t\t\t\t\tif(this.mediator.widgets[i] instanceof Widgetfly.Modal){\n\t\t\t\t\t\t\tif(this.mediator.widgets[i].isShow()){\n\t\t\t\t\t\t\t\tthis.mediator.widgets[i].hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tWidgetfly.Widget.prototype.show.apply(this, arguments);\n\t\t\t\t\tif(this.options.backdrop){\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-show');\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-hide');\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop, 'wf-show');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.hide = function() {\n\t\t\t\t\tWidgetfly.Widget.prototype.hide.apply(this, arguments);\n\t\t\t\t\tif(this.options.backdrop){\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-show');\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-hide');\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop, 'wf-hide');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif(r !== false){\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.removeChild(self.el);\n\t\t\t\t\t\t\tif(self.options.backdrop){\n\t\t\t\t\t\t\t\tself.container.removeChild(self.backdrop);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Modal;\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Popover = (function(global) {'use strict';\n\t\t\t\t// Widgetfly.Popover\n\t\t\t\t// -------------\n\t\t\t\tvar Popover = function(options) {\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Popover.DEFAULTS,options);\n\t\t\t\t\tthis.container = window.document.querySelector('body');\n\t\t\t\n\t\t\t\t\tif (options === undefined || options.target === undefined || options.target === null) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tif(typeof options.target === 'string'){\n\t\t\t\t\t\tthis.target = document.querySelector(options.target);\n\t\t\t\t\t}else if(typeof options.target === 'object'){\n\t\t\t\t\t\tthis.target = options.target;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.target && this.target.length <= 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.render();\n\t\t\t\t\t\n\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\n\t\t\t\t\tthis.style();\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\tplacement : 'right',\n\t\t\t\t\ttemplate : '<div class=\"widgetfly wf-popover wf-hide\"><div class=\"wf-arrow\"></div><iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"wf-popover-content\"></iframe></div>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Popover, Widgetfly.Widget);\n\t\t\t\n\t\t\t\t\n\t\t\t\tPopover.prototype.style = function() {\n\t\t\t\t\tvar placement = this.options.placement;\n\t\t\t\t\tif(!placement){\n\t\t\t\t\t\tplacement = 'right';\n\t\t\t\t\t}\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-' + placement);\n\t\t\t\t\tWidgetfly.Widget.prototype.style.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.prototype.applyPlacement = function () {\n\t\t\t\t\tvar top,left,offset = Widgetfly.Utils.offset(this.target),\n\t\t\t\t\t\ttg  = Widgetfly.Utils.actual(this.target),\n\t\t\t\t\t\tel = Widgetfly.Utils.actual(this.el);\n\t\t\t\t\t\t\n\t\t\t\t\tif(this.options.placement === 'left'){\n\t\t\t\t\t\ttop = offset.top + Math.round(tg.height / 2) - Math.round(el.height / 2);\n\t\t\t\t\t\tleft = offset.left - el.width;\n\t\t\t\t\t}else if(this.options.placement === 'top'){\n\t\t\t\t\t\ttop =  offset.top - el.height;\n\t\t\t\t\t\tleft = offset.left + Math.round(tg.width / 2) - Math.round(el.width / 2);\n\t\t\t\t\t}else if(this.options.placement === 'bottom'){\n\t\t\t\t\t\ttop =  offset.top + tg.height;\n\t\t\t\t\t\tleft = offset.left + Math.round(tg.width / 2) - Math.round(el.width / 2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//default: right\n\t\t\t\t\t\ttop = offset.top + Math.round(tg.height / 2) - Math.round(el.height / 2);\n\t\t\t\t\t\tleft = offset.left + tg.width;\n\t\t\t\t\t}\n\t\t\t\t\tthis.el.setAttribute('data-ext-style','top: ' + top + 'px; left:' + left + 'px;');\n\t\t\t\t\tWidgetfly.Utils.innerStyle(this.el);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.prototype.show = function(){\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tif(this.interval) {\n\t\t\t\t\t\tclearInterval(this.interval);\n\t\t\t\t\t}\n\t\t\t\t\tthis.applyPlacement();\n\t\t\t\t\tthis.interval = setInterval(function(){\n\t\t\t\t\t\tself.applyPlacement();\n\t\t\t\t\t},500);\n\t\t\t\t\t\n\t\t\t\t\tWidgetfly.Widget.prototype.show.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.prototype.hide = function(){\n\t\t\t\t\tif(this.interval) {\n\t\t\t\t\t\tclearInterval(this.interval);\n\t\t\t\t\t}\n\t\t\t\t\tWidgetfly.Widget.prototype.hide.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.prototype.close = function(){\n\t\t\t\t\tif(this.interval) {\n\t\t\t\t\t\tclearInterval(this.interval);\n\t\t\t\t\t}\n\t\t\t\t\tWidgetfly.Widget.prototype.close.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Popover;\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\t(function(global) {'use strict';\n\t\t\t\n\t\t\t\tvar extend = function(protoProps, staticProps) {\n\t\t\t\t\tvar child,parent = this, Surrogate;\n\t\t\t\n\t\t\t\t\t// The constructor function for the new subclass is either defined by you\n\t\t\t\t\t// (the \"constructor\" property in your `extend` definition), or defaulted\n\t\t\t\t\t// by us to simply call the parent's constructor.\n\t\t\t\t\tif (protoProps && (Widgetfly.Utils.has(protoProps, 'constructor'))) {\n\t\t\t\t\t\tchild = protoProps.constructor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchild = function() {\n\t\t\t\t\t\t\treturn parent.apply(this, arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t// Add static properties to the constructor function, if supplied.\n\t\t\t\t\tWidgetfly.Utils.extend(child, parent, staticProps);\n\t\t\t\n\t\t\t\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t\t\t\t// `parent`'s constructor function.\n\t\t\t\t\tSurrogate = function() {\n\t\t\t\t\t\tthis.constructor = child;\n\t\t\t\t\t};\n\t\t\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\t\t\tchild.prototype = new Surrogate();\n\t\t\t\n\t\t\t\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t\t\t\t// if supplied.\n\t\t\t\t\tif (protoProps) {\n\t\t\t\t\t\tWidgetfly.Utils.extend(child.prototype, protoProps);\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t// Set a convenience property in case the parent's prototype is needed\n\t\t\t\t\t// later.\n\t\t\t\t\tchild.__super__ = parent.prototype;\n\t\t\t\n\t\t\t\t\treturn child;\n\t\t\t\t},nowScripts, instance, params, parser;\n\t\t\t\t\n\t\t\t\tWidgetfly.Panel.extend = Widgetfly.Modal.extend = Widgetfly.Popover.extend = Widgetfly.Server.extend = extend;\n\t\t\t\n\t\t\t\t// Initialize for DOM prepare\n\t\t\t\t// -------------\n\t\t\t\t\n\t\t\t\tif (!Widgetfly.Utils.inIframe()) {\n\t\t\t\t\tconsole.log('Now is Widgets initialize');\n\t\t\t\t\tnowScripts = document.currentScript;\n\t\t\t\t\tparser = document.createElement('a');\n\t\t\t\t\tparser.href = nowScripts.getAttribute('src');\n\t\t\t\t\tparams  = Widgetfly.Utils.params(parser.hash);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(params);\n\t\t\t\t\t\n\t\t\t\t\tWidgetfly.Mediator.init();\n\t\t\t\t\t\n\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(params)) {\n\t\t\t\t\t\tif(!params.container){\n\t\t\t\t\t\t\tparams.container = nowScripts.parentNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tnew (Widgetfly.Panel.extend({}))(params);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Now is Server initialize');\n\t\t\t\t\t// widget\n\t\t\t\t\t//var Server = new Widgetfly.Server();\n\t\t\t\t}\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\n\t\t\treturn Widgetfly;\n\t\t})(this);\n\t\t\n\t\treturn Widgetfly;\n}));\n"],"sourceRoot":"/source/"}