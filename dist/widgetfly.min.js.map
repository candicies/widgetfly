{"version":3,"file":"widgetfly.min.js","sources":["widgetfly.js"],"names":["root","factory","define","amd","Widgetfly","this","doc","cssText","styleEl","createElement","getElementsByTagName","appendChild","styleSheet","disabled","innerHTML","ignore","innerText","document","Utils","idCounter","has","obj","key","Object","prototype","hasOwnProperty","call","each","iterator","context","i","l","Array","forEach","length","isEmpty","extend","slice","arguments","source","prop","inherit","Child","Parent","F","constructor","uber","parseUrl","URL","checkLib","nowSrc","parameter","tmpStr","tmpParam","createParam","undefined","getAttribute","split","type","container","appendType","dom","options","shift","join","uniqueId","prefix","id","String","getElementsByClassName","testClass","startFrom","results","finder","RegExp","a","all","test","className","push","inIframe","window","self","top","e","isFunction","isElement","o","HTMLElement","nodeType","nodeName","trans2Elem","element","target","substr","getElementById","replace","hasClass","cls","indexOf","addClass","innerStyle","removeClass","rmClass","newClass","toggleClass","r","match","ruleExp","result","rules","styles","sheets","styleSheets","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","cssRules","selectorText","exec","hasAttribute","style","actual","el","elWidth","elHeight","fixStyle","size","s","Boolean","parseInt","substring","offsetParent","setAttribute","offsetWidth","offsetHeight","width","marginLeft","marginRight","height","marginTop","marginBottom","offset","docElem","win","elem","box","left","ownerDocument","documentElement","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","toElement","content","firstChild","Events","trigger","action","data","Mediator","send","on","callback","bind","off","unbind","widgets","actionHandlers","init","addEventListener","msgObj","receive","getWidget","getActionHandlers","register","widget","unregister","console","log","parser","targetOrigin","corsObj","msg","href","iframe","src","protocol","host","contentWindow","postMessage","keys","origin","widgetId","myActionHandlers","Server","name","events","parent","params","paramData","decodeURIComponent","location","hash","JSON","parse","show","hide","onClose","close","setSize","Widget","DEFAULTS","spinner","getId","j","nodes","childNodes","getIframe","querySelector","tagName","onStart","start","handlers","parentNode","removeChild","onHide","onShow","onBeforeClose","nowScripts","cScript","render","urlOptions","pathname","template","encodeURIComponent","stringify","Panel","apply","hasChildNodes","lastChild","autoGrow","remove","Modal","removChild","backdrop","onclick","sizeChange","getElementsByName","Popover","applyPlacement","placement","tg","Math","round","param","protoProps","staticProps","child","Surrogate","__super__"],"mappings":"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","sourcesContent":["/*\n * Widgetfly\n * A javascript library for building cross-site web widgets.\n * @link https://github.com/qpe/widgetfly\n * @author hsfeng\n * @version 0.1.0\n * @license https://github.com/qpe/widgetfly/blob/master/LICENSE\n * @copyright hsfeng\n */\n(function(root, factory) {'use strict';\n\t\tif ( typeof define === 'function' && define.amd) {\n\t\t\t// AMD. Register as an anonymous module.\n\t\t\tdefine([], function() {\n\t\t\t\t// Also create a global in case some scripts\n\t\t\t\t// that are loaded still are looking for\n\t\t\t\t// a global even when an AMD loader is in use.\n\t\t\t\treturn (root.Widgetfly = factory(root));\n\t\t\t});\n\t\t} else {\n\t\t\t// Browser globals\n\t\t\troot.Widgetfly = factory(root);\n\t\t}\n\t}(this, function(global) {\n\t\t'use strict';\n\t\tvar Widgetfly = (function(global){\n\t\t\t'use strict';\n\t\t\tvar Widgetfly = {};\n\t\t\t\n\t\t\t(function (doc, cssText) {\n\t\t\t    var styleEl = doc.createElement(\"style\");\n\t\t\t    doc.getElementsByTagName(\"head\")[0].appendChild(styleEl);\n\t\t\t    if (styleEl.styleSheet) {\n\t\t\t        if (!styleEl.styleSheet.disabled) {\n\t\t\t            styleEl.styleSheet.cssText = cssText;\n\t\t\t        }\n\t\t\t    } else {\n\t\t\t        try {\n\t\t\t            styleEl.innerHTML = cssText;\n\t\t\t        } catch (ignore) {\n\t\t\t            styleEl.innerText = cssText;\n\t\t\t        }\n\t\t\t    }\n\t\t\t}(document, \".widgetfly .wf-show,.widgetfly.wf-show{display:block !important}.widgetfly .wf-hide,.widgetfly.wf-hide{display:none !important}.widgetfly .wf-root,.widgetfly.wf-root{position:absolute;left:0;top:-9999px;width:47px;height:29px;z-index:999999999}.widgetfly .wf-spinner,.widgetfly.wf-spinner{width:70px;text-align:center}.widgetfly .wf-spinner div,.widgetfly.wf-spinner div{width:18px;height:18px;background-color:#333;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.widgetfly .wf-spinner .wf-bounce1,.widgetfly.wf-spinner .wf-bounce1{-webkit-animation-delay:-0.32s;animation-delay:-0.32s}.widgetfly .wf-spinner .wf-bounce2,.widgetfly.wf-spinner .wf-bounce2{-webkit-animation-delay:-0.16s;animation-delay:-0.16s}@-webkit-keyframes bouncedelay{0%,80%,100%{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes bouncedelay{0%,80%,100%{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}.widgetfly .wf-panel,.widgetfly.wf-panel{width:100% !important;border:none !important;overflow:hidden !important}.widgetfly .wf-modal,.widgetfly.wf-modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;outline:0;opacity:1}.widgetfly .wf-modal .wf-modal-dialog,.widgetfly.wf-modal .wf-modal-dialog{-webkit-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);position:relative;margin:30px auto;width:600px}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 15px rgba(0,0,0,0.5);box-shadow:0 5px 15px rgba(0,0,0,0.5);background-clip:padding-box;outline:0}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content .wf-modal-body,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content .wf-modal-body{position:relative}.widgetfly .wf-modal .wf-modal-dialog .wf-modal-content .wf-close,.widgetfly.wf-modal .wf-modal-dialog .wf-modal-content .wf-close{position:absolute;right:0;margin-top:-2px;margin-right:5px;text-decoration:none;font-size:21px;font-weight:500;line-height:1;color:#000;text-shadow:0 1px 0 #fff;cursor:pointer;filter:alpha(opacity=50);opacity:.5;font-family:\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;z-index:1050}.wf-modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000;filter:alpha(opacity=50);opacity:.5}.widgetfly .wf-popover,.widgetfly.wf-popover{top:0;left:0;z-index:1010;display:none;padding:1px;text-align:left;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);white-space:normal;position:absolute;display:block;float:left;width:260px}.widgetfly .wf-popover .wf-arrow,.widgetfly.wf-popover .wf-arrow{border-width:11px}.widgetfly .wf-popover .wf-arrow,.widgetfly.wf-popover .wf-arrow,.widgetfly .wf-popover .wf-arrow:after,.widgetfly.wf-popover .wf-arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid;content:\\\"\\\";border-width:10px}.widgetfly .wf-popover.wf-top,.widgetfly.wf-popover.wf-top{margin-bottom:10px}.widgetfly .wf-popover.wf-top .wf-arrow,.widgetfly.wf-popover.wf-top .wf-arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.widgetfly .wf-popover.wf-top .wf-arrow:after,.widgetfly.wf-popover.wf-top .wf-arrow:after{bottom:1px;margin-left:-10px;content:\\\" \\\";border-top-color:#fff;border-bottom-width:0}.widgetfly .wf-popover.wf-left,.widgetfly.wf-popover.wf-left{margin-right:10px}.widgetfly .wf-popover.wf-left .wf-arrow,.widgetfly.wf-popover.wf-left .wf-arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,0.25)}.widgetfly .wf-popover.wf-left .wf-arrow:after,.widgetfly.wf-popover.wf-left .wf-arrow:after{right:1px;bottom:-10px;content:\\\" \\\";border-right-width:0;border-left-color:#fff}.widgetfly .wf-popover.wf-bottom,.widgetfly.wf-popover.wf-bottom{margin-top:10px}.widgetfly .wf-popover.wf-bottom .wf-arrow,.widgetfly.wf-popover.wf-bottom .wf-arrow{top:-11px;left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25)}.widgetfly .wf-popover.wf-bottom .wf-arrow:after,.widgetfly.wf-popover.wf-bottom .wf-arrow:after{top:1px;margin-left:-10px;content:\\\" \\\";border-top-width:0;border-bottom-color:#fff}.widgetfly .wf-popover.wf-right,.widgetfly.wf-popover.wf-right{margin-left:10px}.widgetfly .wf-popover.wf-right .wf-arrow,.widgetfly.wf-popover.wf-right .wf-arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.widgetfly .wf-popover.wf-right .wf-arrow:after,.widgetfly.wf-popover.wf-right .wf-arrow:after{bottom:-10px;left:1px;content:\\\" \\\";border-right-color:#fff;border-left-width:0}\"));\n\t\t\t\n\t\t\tWidgetfly.Utils = (function(global) {'use strict';\n\t\t\t\t// Utilities\n\t\t\t\t// -------------\n\t\t\t\n\t\t\t\tvar idCounter = 0, Utils = {\n\t\t\t\t\thas : function(obj, key) {\n\t\t\t\t\t\treturn Object.prototype.hasOwnProperty.call(obj, key);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\teach : function(obj, iterator, context) {\n\t\t\t\t\t\tvar i, l, key;\n\t\t\t\n\t\t\t\t\t\tif (obj === null) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\tif (Array.prototype.forEach && obj.forEach === Array.prototype.forEach) {\n\t\t\t\t\t\t\tobj.forEach(iterator, context);\n\t\t\t\t\t\t} else if ( typeof obj.length === 'number') {\n\t\t\t\t\t\t\tfor ( i = 0, l = obj.length; i < l; i++) {\n\t\t\t\t\t\t\t\tif (iterator.call(context, obj[i], i, obj) === {}) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (key in obj) {\n\t\t\t\t\t\t\t\tif (Widgetfly.Utils.has(obj, key)) {\n\t\t\t\t\t\t\t\t\tif (iterator.call(context, obj[key], key, obj) === {}) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisEmpty : function(obj) {\n\t\t\t\t\t\t// null and undefined are \"empty\"\n\t\t\t\t\t\tif (obj === null) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t// Assume if it has a length property with a non-zero value\n\t\t\t\t\t\t// that that property is correct.\n\t\t\t\t\t\tif (obj.length > 0) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\tif (obj.length === 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t// Otherwise, does it have any properties of its own?\n\t\t\t\t\t\t// Note that this doesn't handle\n\t\t\t\t\t\t// toString and valueOf enumeration bugs in IE < 9\n\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\textend : function(obj) {\n\t\t\t\t\t\tthis.each(Array.prototype.slice.call(arguments, 1), function(source) {\n\t\t\t\t\t\t\tif (source) {\n\t\t\t\t\t\t\t\tfor (var prop in source) {\n\t\t\t\t\t\t\t\t\tobj[prop] = source[prop];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tinherit : function(Child, Parent) {\n\t\t\t\t\t\tvar F = function() {\n\t\t\t\t\t\t};\n\t\t\t\t\t\tF.prototype = Parent.prototype;\n\t\t\t\t\t\tChild.prototype = new F();\n\t\t\t\t\t\tChild.prototype.constructor = Child;\n\t\t\t\t\t\tChild.uber = Parent.prototype;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tparseUrl : function(URL, checkLib) {\n\t\t\t\t\t\tvar nowSrc, parameter, createParam = {}, i, tmpStr, tmpParam;\n\t\t\t\t\t\tif ( typeof URL !== 'string' && URL.length > 0) {\n\t\t\t\t\t\t\tURL = URL[URL.length - 1];\n\t\t\t\t\t\t\tif (URL.getAttribute.length !== undefined) {\n\t\t\t\t\t\t\t\tnowSrc = URL.getAttribute('src', -1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnowSrc = URL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparameter = nowSrc.split('?', 2);\n\t\t\t\t\t\tif (parameter.length > 1) {\n\t\t\t\t\t\t\tparameter = parameter[1];\n\t\t\t\t\t\t\tparameter = parameter.split('?');\n\t\t\t\t\t\t\tif (parameter.length > 0) {\n\t\t\t\t\t\t\t\tif (parameter[0].split('=', 2).length > 0) {\n\t\t\t\t\t\t\t\t\tcreateParam.type = parameter[0].split('=', 2)[1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t\t\tif (parameter[1] !== undefined && parameter[1].split('=', 2).length > 0) {\n\t\t\t\t\t\t\t\t\tif (parameter[1].split('=', 2)[1] !== '') {\n\t\t\t\t\t\t\t\t\t\tcreateParam.container = parameter[1].split('=', 2)[1];\n\t\t\t\t\t\t\t\t\t\tif (parameter[1].split('=', 2)[0] === 'appendClass') {\n\t\t\t\t\t\t\t\t\t\t\tcreateParam.appendType = 'class';\n\t\t\t\t\t\t\t\t\t\t\tcreateParam.dom = '.' + createParam.container;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tcreateParam.appendType = 'id';\n\t\t\t\t\t\t\t\t\t\t\tcreateParam.dom = '#' + createParam.container;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (parameter.length > 2) {\n\t\t\t\t\t\t\t\t\tcreateParam.options = {};\n\t\t\t\t\t\t\t\t\tfor ( i = 2; i < parameter.length; i++) {\n\t\t\t\t\t\t\t\t\t\tif (parameter[i].split('=', 2).length > 0) {\n\t\t\t\t\t\t\t\t\t\t\ttmpParam = parameter[i].split('=', 2)[1];\n\t\t\t\t\t\t\t\t\t\t\ttmpParam = tmpParam.split(':');\n\t\t\t\t\t\t\t\t\t\t\tif (tmpParam.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\ttmpStr = tmpParam.shift();\n\t\t\t\t\t\t\t\t\t\t\t\tif (tmpParam.length !== 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttmpParam = tmpParam.join(':');\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (tmpParam !== '' && tmpParam !== null && tmpParam !== 'null') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateParam.options[tmpStr] = tmpParam;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\tif (checkLib === undefined) {\n\t\t\t\t\t\t\treturn createParam;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcheckLib(createParam);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tuniqueId : function(prefix) {\n\t\t\t\t\t\tvar id = String(++idCounter);\n\t\t\t\t\t\treturn prefix ? prefix + id : id;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tgetElementsByClassName : function(testClass, startFrom) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * getElementsByClassName\n\t\t\t\t\t\t * @fileOverview An easy way to find DOM Nodes with a specific class\n\t\t\t\t\t\t * @author Dan Beam <dan@danbeam.org>\n\t\t\t\t\t\t * @param {string} className - the class we're looking for on DOM Nodes\n\t\t\t\t\t\t * @param {element} startFrom (optional) - a point in the DOM to start from\n\t\t\t\t\t\t * @return {array} results - any DOM Nodes that have the specified class\n\t\t\t\t\t\t */\n\t\t\t\n\t\t\t\t\t\tfor (var// this will be incremented to 0 at start of loop\n\t\t\t\t\t\ti = -1,\n\t\t\t\t\t\t// results of the DOM query (elements with matching class)\n\t\t\t\t\t\tresults = [],\n\t\t\t\t\t\t// regular expression to see if the class attribute contains\n\t\t\t\t\t\t// the searched for class\n\t\t\t\t\t\tfinder = new RegExp('(?:^|\\\\s)' + testClass + '(?:\\\\s|$)'),\n\t\t\t\t\t\t// grab all DOM elements and the set's length\n\t\t\t\t\t\ta = startFrom && startFrom.getElementsByTagName && startFrom.getElementsByTagName('*') || document.all || document.getElementsByTagName('*'),\n\t\t\t\n\t\t\t\t\t\t// cache the length property\n\t\t\t\t\t\tl = a.length;\n\t\t\t\n\t\t\t\t\t\t// this is done before we start and at every comparison (note the ++)\n\t\t\t\t\t\t++i < l;\n\t\t\t\t\t\t// this is done after the first comparison and every iteration afterward\n\t\t\t\t\t\tfinder.test(a[i].className) && results.push(a[i])) {\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// do memory management and return the results of our query\n\t\t\t\t\t\ta = null;\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tinIframe : function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn window.self !== window.top;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisFunction : function(obj) {\n\t\t\t\t\t\treturn typeof obj === 'function';\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tisElement : function(o) {\n\t\t\t\t\t\treturn ( typeof HTMLElement === 'object' ? o instanceof HTMLElement : o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string');\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\ttrans2Elem : function(element, startFrom) {\n\t\t\t\t\t\tvar target;\n\t\t\t\t\t\tif ( typeof element === 'string') {\n\t\t\t\t\t\t\tif (element.substr(0, 1) === '#') {\n\t\t\t\t\t\t\t\ttarget = document.getElementById(element.replace('#', ''));\n\t\t\t\t\t\t\t} else if (element.substr(0, 1) === '.') {\n\t\t\t\t\t\t\t\ttarget = this.getElementsByClassName(element.replace('.', ''), startFrom)[0];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget = document.getElementsByTagName(element)[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn target;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\thasClass : function(element, cls) {\n\t\t\t\t\t\treturn (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\taddClass : function(element, className, startFrom) {\n\t\t\t\t\t\tvar target;\n\t\t\t\t\t\tif (startFrom === undefined) {\n\t\t\t\t\t\t\tstartFrom = document;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this.trans2Elem(element, startFrom);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (!this.hasClass(target, className)) {\n\t\t\t\t\t\t\ttarget.className += ' ' + className;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(target);\n\t\t\t\t\t},\n\t\t\t\t\n\t\t\t\t\tremoveClass : function(element, rmClass, startFrom) {\n\t\t\t\t\t\tvar target, newClass;\n\t\t\t\t\t\tif (startFrom === undefined) {\n\t\t\t\t\t\t\tstartFrom = document;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this.trans2Elem(element, startFrom);\n\t\t\t\n\t\t\t\t\t\tif (target !== undefined && this.isElement(target)) {\n\t\t\t\t\t\t\tnewClass = ' ' + target.className.replace(/[\\t\\r\\n]/g, ' ') + ' ';\n\t\t\t\t\t\t\tif (this.hasClass(target, rmClass)) {\n\t\t\t\t\t\t\t\twhile (newClass.indexOf(' ' + rmClass + ' ') >= 0) {\n\t\t\t\t\t\t\t\t\tnewClass = newClass.replace(' ' + rmClass + ' ', ' ');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttarget.className = newClass.replace(/^\\s+|\\s+$/g, '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(target);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\ttoggleClass : function(element, className, startFrom) {\n\t\t\t\t\t\tvar target, newClass;\n\t\t\t\t\t\tif (startFrom === undefined) {\n\t\t\t\t\t\t\tstartFrom = document;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this.trans2Elem(element, startFrom);\n\t\t\t\t\t\tif (target !== undefined && this.isElement(target)) {\n\t\t\t\t\t\t\tnewClass = ' ' + target.className.replace(/[\\t\\r\\n]/g, ' ') + ' ';\n\t\t\t\t\t\t\tif (this.hasClass(target, className)) {\n\t\t\t\t\t\t\t\twhile (newClass.indexOf(' ' + className + ' ') >= 0) {\n\t\t\t\t\t\t\t\t\tnewClass = newClass.replace(' ' + className + ' ', ' ');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttarget.className = newClass.replace(/^\\s+|\\s+$/g, '');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.className += ' ' + className;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.innerStyle(target);\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tinnerStyle : function css(a) {\n\t\t\t\t\t    var i,r, match, ruleExp, result,styles = [],rules, sheets = document.styleSheets, o = [];\n\t\t\t\t\t    a.matches = a.matches || a.webkitMatchesSelector || a.mozMatchesSelector || a.msMatchesSelector || a.oMatchesSelector;\n\t\t\t\t\t    for (i in sheets) {\n\t\t\t\t\t        rules = sheets[i].rules || sheets[i].cssRules;\n\t\t\t\t\t        for (r in rules) {\n\t\t\t\t\t            if (a.matches(rules[r].selectorText)) {\n\t\t\t\t\t                o.push(rules[r].cssText);\n\t\t\t\t\t            }\n\t\t\t\t\t        }\n\t\t\t\t\t    }\n\t\t\t\t\t    for (i in o){\n\t\t\t\t\t\t\tr = o[i];\n\t\t\t\t\t\t\tif(r.indexOf('.widgetfly') === 0){\n\t\t\t\t\t\t\t\truleExp = /\\{\\s*([^\\}]+)\\s\\}/g;\n\t\t\t\t\t\t\t\tmatch = ruleExp.exec(r);\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tstyles.push(match[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t\t\t\t    result = styles.join(' ');\n\t\t\t\t\t    if(a.hasAttribute('data-ext-style')){\n\t\t\t\t\t\t\tresult = result + ' ' + a.getAttribute('data-ext-style');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta.style.cssText = result;\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tactual : function(el){\n\t\t\t\t\t\tvar elWidth,elHeight,style,\n\t\t\t\t\t\tfixStyle = ' visibility: hidden !important; display: block !important; position: absolute !important;',\n\t\t\t\t\t\tsize = function(s){\n\t\t\t\t\t\t\t\tif(Boolean(s)){\n\t\t\t\t\t\t\t\t\treturn parseInt(s.substring(0,s.indexOf('px')),10);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (el.offsetParent === null) {\n\t\t\t\t\t\t\tel.setAttribute('style', el.getAttribute('style') + fixStyle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\telWidth = el.offsetWidth;\n\t\t\t\t\t\t\n\t\t\t\t\t\telHeight = el.offsetHeight;\n\t\t\t\t\t\t\n\t\t\t\t\t\tstyle = el.getAttribute('style');\n\t\t\t\t\t\tif(style && style.indexOf(fixStyle) !== 0){\n\t\t\t\t\t\t\tel.setAttribute('style', style.substring(0,style.indexOf(fixStyle)));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\twidth : elWidth + size(el.style.marginLeft) + size(el.style.marginRight),\n\t\t\t\t\t\t\theight : elHeight + size(el.style.marginTop) + size(el.style.marginBottom)\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\toffset: function(el) {\n\t\t\t\t\t\tvar docElem, win,\n\t\t\t\t\t\telem = el,\n\t\t\t\t\t\tbox = { top: 0, left: 0 },\n\t\t\t\t\t\tdoc = elem && elem.ownerDocument;\n\t\t\t\n\t\t\t\t\t\tif ( !doc ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\tdocElem = doc.documentElement;\n\t\t\t\t\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\t\t\t\t\t// BlackBerry 5, iOS 3 (original iPhone)\n\t\t\t\t\t\tif ( typeof elem.getBoundingClientRect !== undefined ) {\n\t\t\t\t\t\t\tbox = elem.getBoundingClientRect();\n\t\t\t\t\t\t}\n\t\t\t\t\t\twin = window;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\t\t\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\ttoElement : function(content){\n\t\t\t\t\t\tvar el = document.createElement('div');\n\t\t\t\t\t\tel.innerHTML = content;\n\t\t\t\t\t\treturn el.firstChild;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Utils;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Events = (function(global) {'use strict';\n\t\t\t\t// Events\n\t\t\t\t// -------------\n\t\t\t\tvar Events = function() {\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.trigger = function(action, data) {\n\t\t\t\t\tWidgetfly.Mediator.send(this.id, action, data);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.on = function(action, callback) {\n\t\t\t\t\tWidgetfly.Mediator.bind(this.id, action, callback);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tEvents.prototype.off = function(action) {\n\t\t\t\t\tWidgetfly.Mediator.unbind(this.id, action);\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Events;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Mediator = (function(global) {'use strict';\n\t\t\t\t// Mediator\n\t\t\t\t// -------------\n\t\t\t\tvar Mediator = {\n\t\t\t\n\t\t\t\t\twidgets : {},\n\t\t\t\n\t\t\t\t\tactionHandlers : {},\n\t\t\t\n\t\t\t\t\tinit : function() {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\twindow.addEventListener('message', function(msgObj) {\n\t\t\t\t\t\t\tself.receive(msgObj);\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tgetWidget : function(id) {\n\t\t\t\t\t\treturn this.widgets[id];\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tgetActionHandlers : function(id) {\n\t\t\t\t\t\treturn this.actionHandlers[id];\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tregister : function(id, widget) {\n\t\t\t\t\t\tthis.widgets[widget.id] = widget;\n\t\t\t\t\t\tthis.actionHandlers[widget.id] = {};\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tunregister : function(id, callback) {\n\t\t\t\t\t\tif (this.actionHandlers[id] !== undefined) {\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tWidgetfly.Utils.each(this.actionHandlers[id], function(key) {\n\t\t\t\t\t\t\t\tdelete self.actionHandlers[id][key];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this.widgets[id];\n\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tsend : function(id, action, data) {\n\t\t\t\t\t\tconsole.log('Mediator.send');\n\t\t\t\n\t\t\t\t\t\tvar parser, targetOrigin, corsObj = {\n\t\t\t\t\t\t\tmsg : data,\n\t\t\t\t\t\t\taction : action,\n\t\t\t\t\t\t\tid : id\n\t\t\t\t\t\t}, widget = this.widgets[id];\n\t\t\t\n\t\t\t\t\t\tif (widget) {\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = widget.iframe.src;\n\t\t\t\t\t\t\ttargetOrigin = parser.protocol + '//' + parser.host;\n\t\t\t\t\t\t\twidget.iframe.contentWindow.postMessage(corsObj, targetOrigin);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tbind : function(id, action, callback) {\n\t\t\t\t\t\tconsole.log('Mediator.bind: ' + action);\n\t\t\t\t\t\tif (this.actionHandlers[id] === undefined) {\n\t\t\t\t\t\t\tthis.actionHandlers[id] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.actionHandlers[id][action] = callback;\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\tunbind : function(id, action) {\n\t\t\t\t\t\tconsole.log('Mediator.unbind');\n\t\t\t\t\t\tdelete this.actionHandlers[id][action];\n\t\t\t\t\t\tif (Object.keys(this.actionHandlers[id]).length <= 0) {\n\t\t\t\t\t\t\tdelete this.actionHandlers[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\n\t\t\t\t\treceive : function(msgObj) {\n\t\t\t\t\t\tconsole.log('Mediator.receive');\n\t\t\t\n\t\t\t\t\t\tvar origin, parser, widgetId = msgObj.data.id, widget = this.widgets[widgetId], myActionHandlers = this.actionHandlers[widgetId], action = msgObj.data.action;\n\t\t\t\n\t\t\t\t\t\tif (widget) {\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = widget.iframe.src;\n\t\t\t\t\t\t\torigin = parser.protocol + '//' + parser.host;\n\t\t\t\n\t\t\t\t\t\t\tif (origin !== msgObj.origin) {\n\t\t\t\t\t\t\t\tconsole.log('Widget ignore message from ' + msgObj.origin);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t\tif (widget && Widgetfly.Utils.isFunction(widget[action])) {\n\t\t\t\t\t\t\t\twidget[action](msgObj.data.msg);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(myActionHandlers) && Widgetfly.Utils.isFunction(myActionHandlers[action])) {\n\t\t\t\t\t\t\t\t\tmyActionHandlers[action](msgObj.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Mediator;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Server = (function(global) {'use strict';\n\t\t\t\t// Server\n\t\t\t\t// -------------\n\t\t\t\tvar Server = function() {\n\t\t\t\t\tthis.id = window.name;\n\t\t\t\t\tthis.events = {};\n\t\t\t\t\tthis.init();\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Server, Widgetfly.Events);\n\t\t\t\n\t\t\t\tServer.prototype.init = function() {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tthis.trigger('start');\n\t\t\t\t\twindow.addEventListener('message', function(msgObj) {\n\t\t\t\t\t\tif(window.parent){\n\t\t\t\t\t\t\tvar action, origin, parser, params,paramData = decodeURIComponent(window.location.hash.substring(1));\n\t\t\t\t\t\t\tparams = JSON.parse(paramData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tparser = window.document.createElement('a');\n\t\t\t\t\t\t\tparser.href = params.origin;\n\t\t\t\t\t\t\torigin = parser.protocol + '//' + parser.host;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(origin !== 'file://' && origin !== msgObj.origin){\n\t\t\t\t\t\t\t\tconsole.log('Server ignore message from ' + msgObj.origin);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taction = msgObj.data.action;\n\t\t\t\t\t\t\tif (Widgetfly.Utils.isFunction(self[action])) {\n\t\t\t\t\t\t\t\tself[action](msgObj.data.msg);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(self.events) && Widgetfly.Utils.isFunction(self.events[action])) {\n\t\t\t\t\t\t\t\t\tself.events[action](msgObj.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.on = function(key, callback) {\n\t\t\t\t\tthis.events[key] = callback;\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.off = function(key) {\n\t\t\t\t\tdelete this.events[key];\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.trigger = function(action, data) {\n\t\t\t\t\tconsole.log('Server.trigger');\n\t\t\t\t\tvar corsObj = {\n\t\t\t\t\t\tmsg : data,\n\t\t\t\t\t\taction : action,\n\t\t\t\t\t\tid : this.id\n\t\t\t\t\t}, params = JSON.parse(decodeURIComponent(window.location.hash.substring(1)));\n\t\t\t\t\t\n\t\t\t\t\t//console.log(corsObj);\n\t\t\t\t\tparent.postMessage(corsObj, params.origin);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.show = function() {\n\t\t\t\t\tthis.trigger('show');\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.hide = function() {\n\t\t\t\t\tthis.trigger('hide');\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.onClose = function(callback) {\n\t\t\t\t\tconsole.log('Server onClose action');\n\t\t\t\t\tcallback();\n\t\t\t\t};\n\t\t\t\n\t\t\t\tServer.prototype.close = function() {\n\t\t\t\t\tconsole.log('Prepare server close action');\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tWidgetfly.Utils.each(this.events, function(key) {\n\t\t\t\t\t\tdelete self.events[key];\n\t\t\t\t\t});\n\t\t\t\n\t\t\t\t\tthis.onClose(function() {\n\t\t\t\t\t\tconsole.log('Server close action');\n\t\t\t\t\t\tself.trigger('close');\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\n\t\t\t\t/*\n\t\t\t\t Server.prototype.setAutoGrow = function(width, height) {\n\t\t\t\t //console.log(size);\n\t\t\t\t Events.trigger(window.name, 'sizeChange', width, height);\n\t\t\t\t };\n\t\t\t\t */\n\t\t\t\tServer.prototype.setSize = function(width, height) {\n\t\t\t\t\t//console.log(size);\n\t\t\t\t\tWidgetfly.Events.trigger(window.name, 'sizeChange', width, height);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\treturn Server;\n\t\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Widget = (function(global) {'use strict';\n\t\t\t\t// Widget\n\t\t\t\t// -------------\n\t\t\t\tvar Widget = function() {\n\t\t\t\t\tthis.id = Widgetfly.Utils.uniqueId('widget');\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.DEFAULTS = Widgetfly.Utils.extend({},{\n\t\t\t\t\tspinner : '<div class=\"widgetfly wf-spinner\"><div class=\"wf-bounce1\"></div><div class=\"wf-bounce2\"></div><div class=\"wf-bounce3\"></div></div>'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Widget, Widgetfly.Events);\n\t\t\t\n\t\t\t\tWidget.prototype.getId = function() {\n\t\t\t\t\treturn this.id;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.prototype.style = function() {\n\t\t\t\t\tvar r = function(el){\n\t\t\t\t\t\tif(el.className){\n\t\t\t\t\t\t\tWidgetfly.Utils.addClass(el, el.className);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar i,j, nodes = el.childNodes;\n\t\t\t\t\t\tfor(i in nodes){\n\t\t\t\t\t\t\tif(nodes[i].className && (nodes[i].className.indexOf('widgetfly') === 0 || nodes[i].className.indexOf('wf-') === 0)){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tWidgetfly.Utils.addClass(nodes[i], nodes[i].className);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nodes[i].childNodes){\n\t\t\t\t\t\t\t\tfor(j in nodes[i].childNodes){\n\t\t\t\t\t\t\t\t\tr(nodes[i].childNodes[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tr(this.el);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tWidget.prototype.getIframe = function(){\n\t\t\t\t\tvar iframe = this.el.querySelector('iframe');\n\t\t\t\t\tif(!iframe){\n\t\t\t\t\t\tif(this.el.tagName === 'IFRAME'){\n\t\t\t\t\t\t\tiframe = this.el;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn iframe;\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onStart = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onStart', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.start = function() {\n\t\t\t\t\tconsole.log('Widget.Action start');\n\t\t\t\t\tvar handlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onStart)) {\n\t\t\t\t\t\thandlers.onStart();\n\t\t\t\t\t}\n\t\t\t\t\tif(this.spinner){\n\t\t\t\t\t\tif(this.container === this.spinner.parentNode){\n\t\t\t\t\t\t\tthis.container.removeChild(this.spinner);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(this.options.show){\n\t\t\t\t\t\tthis.show();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onHide = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onHide', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.hide = function() {\n\t\t\t\t\tconsole.log('Widget.Action hide');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-show');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-hide');\n\t\t\t\t\tvar handlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onHide)) {\n\t\t\t\t\t\thandlers.onHide();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onShow = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onShow', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.show = function() {\n\t\t\t\t\tconsole.log('Widget.Action show');\n\t\t\t\t\tvar self = this, handlers;\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-show');\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.el, 'wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-show');\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onShow)) {\n\t\t\t\t\t\thandlers.onShow();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.onBeforeClose = function(callback) {\n\t\t\t\t\tif (Widgetfly.Utils.isFunction(callback)) {\n\t\t\t\t\t\tthis.on('onBeforeClose', callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif(r !== false){\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.removeChild(self.el);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.register = function() {\n\t\t\t\t\tvar nowScripts = document.getElementsByTagName('script'), cScript = nowScripts[nowScripts.length - 1];\n\t\t\t\t\t//console.log(this);\n\t\t\t\t\tWidgetfly.Mediator.register(this.id, this);\n\t\t\t\t\tcScript.setAttribute('data-id', this.id);\n\t\t\t\t};\n\t\t\t\n\t\t\t\tWidget.prototype.render = function() {\n\t\t\t\t\tvar src, iframe, origin, urlOptions;\n\t\t\t\t\tif (window.location.protocol === 'file:') {\n\t\t\t\t\t\torigin = window.location.protocol + '//' + window.location.pathname;\n\t\t\t\t\t} else {\n\t\t\t\t\t\torigin = window.location.protocol + '//' + window.location.host;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\turlOptions = {\n\t\t\t\t\t\torigin : origin,\n\t\t\t\t\t\toptions : this.options.options\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tthis.spinner = Widgetfly.Utils.toElement(this.options.spinner);\n\t\t\t\t\t\n\t\t\t\t\tif(this.options.show){\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.spinner,'wf-show wf-hide');\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.spinner,'wf-show');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tWidgetfly.Utils.removeClass(this.spinner,'wf-show wf-hide');\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.spinner,'wf-hide');\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tthis.el = Widgetfly.Utils.toElement(this.options.template);\n\t\t\t\t\t\n\t\t\t\t\tiframe = this.getIframe();\n\t\t\t\n\t\t\t\t\tiframe.setAttribute('name', this.id);\n\t\t\t\t\t\n\t\t\t\t\tif (this.options.src.indexOf('#') === -1) {\n\t\t\t\t\t\tsrc = this.options.src + '#';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsrc = this.options.src.substring(0,this.options.src.indexOf('#')) + '#';\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsrc = src + encodeURIComponent(JSON.stringify(urlOptions));\n\t\t\t\t\t\n\t\t\t\t\tiframe.setAttribute('src', src);\n\t\t\t\n\t\t\t\t\treturn iframe;\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Widget;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Panel = (function(global) {'use strict';\n\t\t\t\n\t\t\t\t// Widgetfly.Panel\n\t\t\t\t// -------------\n\t\t\t\tvar Panel = function(options) {\n\t\t\t\n\t\t\t\t\tvar elms = [], tmp;\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\t\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Panel.DEFAULTS,options);\n\t\t\t\n\t\t\t\t\tif (options === undefined || options.container === undefined || options.container === null) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tthis.container = window.document.querySelector(options.container);\n\t\t\t\t\tif (this.container && this.container.length <= 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tthis.render();\n\t\t\t\n\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\n\t\t\t\t\tthis.style();\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\tif (options.show) {\n\t\t\t\t\t\t\tthis.show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (this.container.hasChildNodes()) {\n\t\t\t\t\t\t\tthis.container.removeChild(this.container.lastChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPanel.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\ttemplate : '<iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"widgetfly wf-panel wf-hide\"></iframe>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Panel, Widgetfly.Widget);\n\t\t\t\n\t\t\t\tPanel.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif (r !== false) {\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.remove(0);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Panel;\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Modal = (function(global) {'use strict';\n\t\t\t\t// Widgetfly.Modal\n\t\t\t\t// -------------\n\t\t\t\tvar Modal = function(options) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Modal.DEFAULTS,options);\n\t\t\t\t\tthis.container = window.document.querySelector('body');\n\t\t\t\t\t\n\t\t\t\t\tif (options === undefined) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(document.querySelector('.wf-modal')){\n\t\t\t\t\t\tthis.container.removChild(document.querySelector('.wf-modal'));\n\t\t\t\t\t}\n\t\t\t\t\tif(document.querySelector('.wf-modal-backdrop')){\n\t\t\t\t\t\tthis.container.removChild(document.querySelector('.wf-modal-backdrop'));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.backdrop = window.document.createElement('div');\n\t\t\t\t\t\tthis.el.querySelector('.wf-close').onclick = function() {\n\t\t\t\t\t\t\tself.close();\n\t\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop,'widgetfly wf-modal-backdrop in');\n\t\t\t\t\t\tthis.container.appendChild(this.backdrop);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.style();\n\t\t\t\t\t\tif (options.show) {\n\t\t\t\t\t\t\tthis.show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\tbackdrop : true,\n\t\t\t\t\ttemplate : '<div class=\"widgetfly wf-modal\"><div class=\"wf-modal-dialog\"><div class=\"wf-modal-content\"><a class=\"wf-close\" href=\"javascript:void(0)\">x</a><iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"wf-modal-body wf-show\"></iframe></div></div></div>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Modal, Widgetfly.Widget);\n\t\t\t\n\t\t\t\tModal.prototype.sizeChange = function(size) {\n\t\t\t\t\tdocument.getElementsByName(this.id)[0].height = size + 'px';\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.show = function() {\n\t\t\t\t\tWidgetfly.Widget.prototype.show.apply(this, arguments);\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-show wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop, 'wf-show');\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.hide = function() {\n\t\t\t\t\tWidgetfly.Widget.prototype.hide.apply(this, arguments);\n\t\t\t\t\tWidgetfly.Utils.removeClass(this.backdrop, 'wf-show wf-hide');\n\t\t\t\t\tWidgetfly.Utils.addClass(this.backdrop, 'wf-hide');\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tModal.prototype.close = function() {\n\t\t\t\t\tconsole.log('Widget.Action close');\n\t\t\t\t\tvar r, self = this, handlers;\n\t\t\t\t\thandlers = Widgetfly.Mediator.getActionHandlers(this.id);\n\t\t\t\t\tif (handlers && Widgetfly.Utils.isFunction(handlers.onBeforeClose)) {\n\t\t\t\t\t\tr = handlers.onBeforeClose();\n\t\t\t\t\t}\n\t\t\t\t\tif(r !== false){\n\t\t\t\t\t\tWidgetfly.Mediator.unregister(this.id, function() {\n\t\t\t\t\t\t\tself.container.removeChild(self.el);\n\t\t\t\t\t\t\tself.container.removeChild(self.backdrop);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Modal;\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\tWidgetfly.Popover = (function(global) {'use strict';\n\t\t\t\t// Widgetfly.Popover\n\t\t\t\t// -------------\n\t\t\t\tvar Popover = function(options) {\n\t\t\t\t\tWidgetfly.Widget.apply(this, arguments);\n\t\t\t\t\tthis.options = Widgetfly.Utils.extend({}, Popover.DEFAULTS,options);\n\t\t\t\t\tthis.container = window.document.querySelector('body');\n\t\t\t\n\t\t\t\t\tif (options === undefined || options.target === undefined || options.target === null) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tthis.register(this.id);\n\t\t\t\t\t\n\t\t\t\t\tthis.target = window.document.querySelector(options.target);\n\t\t\t\t\tif (this.target && this.target.length <= 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.render();\n\t\t\t\t\t\n\t\t\t\t\tthis.iframe = this.getIframe();\n\t\t\t\t\t\n\t\t\t\t\tthis.style();\n\t\t\t\t\t\n\t\t\t\t\tif (this.container) {\n\t\t\t\t\t\t//this.container.appendChild(this.spinner);\n\t\t\t\t\t\tthis.container.appendChild(this.el);\n\t\t\t\t\t\tthis.applyPlacement();\n\t\t\t\t\t\tif (options.show) {\n\t\t\t\t\t\t\tthis.show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.DEFAULTS = Widgetfly.Utils.extend({}, Widgetfly.Widget.DEFAULTS,{\n\t\t\t\t\tautoGrow : false,\n\t\t\t\t\tshow : true,\n\t\t\t\t\tplacement : 'right',\n\t\t\t\t\ttemplate : '<div class=\"widgetfly wf-popover wf-hide\"><div class=\"wf-arrow\"></div><iframe allowtransparency=\"true\" frameborder=\"0\" tabindex=\"0\" title=\"Widgetfly Widget\" width=\"100%\" verticalscrolling=\"no\" scrolling=\"no\" horizontalscrolling=\"no\" class=\"wf-popover-content\"></iframe></div>',\n\t\t\t\t\toptions : {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t\tWidgetfly.Utils.inherit(Popover, Widgetfly.Widget);\n\t\t\t\n\t\t\t\t\n\t\t\t\tPopover.prototype.style = function() {\n\t\t\t\t\tvar placement = this.options.placement;\n\t\t\t\t\tif(!placement){\n\t\t\t\t\t\tplacement = 'right';\n\t\t\t\t\t}\n\t\t\t\t\tWidgetfly.Utils.addClass(this.el, 'wf-' + placement);\n\t\t\t\t\tWidgetfly.Widget.prototype.style.apply(this, arguments);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tPopover.prototype.applyPlacement = function () {\n\t\t\t\t\tvar top,left,offset = Widgetfly.Utils.offset(this.target),\n\t\t\t\t\t\ttg  = Widgetfly.Utils.actual(this.target),\n\t\t\t\t\t\tel = Widgetfly.Utils.actual(this.el);\n\t\t\t\t\t\t\n\t\t\t\t\tif(this.options.placement === 'left'){\n\t\t\t\t\t\ttop = offset.top + Math.round(tg.height / 2) - Math.round(el.height / 2);\n\t\t\t\t\t\tleft = offset.left - el.width;\n\t\t\t\t\t}else if(this.options.placement === 'top'){\n\t\t\t\t\t\ttop =  offset.top - el.height;\n\t\t\t\t\t\tleft = offset.left + Math.round(tg.width / 2) - Math.round(el.width / 2);\n\t\t\t\t\t}else if(this.options.placement === 'bottom'){\n\t\t\t\t\t\ttop =  offset.top + tg.height;\n\t\t\t\t\t\tleft = offset.left + Math.round(tg.width / 2) - Math.round(el.width / 2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//default: right\n\t\t\t\t\t\ttop = offset.top + Math.round(tg.height / 2) - Math.round(el.height / 2);\n\t\t\t\t\t\tleft = offset.left + tg.width;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tthis.el.setAttribute('data-ext-style','top: ' + top + 'px; left:' + left + 'px;');\n\t\t\t\t};\n\t\t\t\n\t\t\t\treturn Popover;\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\t(function(global) {'use strict';\n\t\t\t\n\t\t\t\tvar extend = function(protoProps, staticProps) {\n\t\t\t\t\tvar child,parent = this, Surrogate;\n\t\t\t\n\t\t\t\t\t// The constructor function for the new subclass is either defined by you\n\t\t\t\t\t// (the \"constructor\" property in your `extend` definition), or defaulted\n\t\t\t\t\t// by us to simply call the parent's constructor.\n\t\t\t\t\tif (protoProps && (Widgetfly.Utils.has(protoProps, 'constructor'))) {\n\t\t\t\t\t\tchild = protoProps.constructor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchild = function() {\n\t\t\t\t\t\t\treturn parent.apply(this, arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t// Add static properties to the constructor function, if supplied.\n\t\t\t\t\tWidgetfly.Utils.extend(child, parent, staticProps);\n\t\t\t\n\t\t\t\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t\t\t\t// `parent`'s constructor function.\n\t\t\t\t\tSurrogate = function() {\n\t\t\t\t\t\tthis.constructor = child;\n\t\t\t\t\t};\n\t\t\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\t\t\tchild.prototype = new Surrogate();\n\t\t\t\n\t\t\t\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t\t\t\t// if supplied.\n\t\t\t\t\tif (protoProps) {\n\t\t\t\t\t\tWidgetfly.Utils.extend(child.prototype, protoProps);\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t// Set a convenience property in case the parent's prototype is needed\n\t\t\t\t\t// later.\n\t\t\t\t\tchild.__super__ = parent.prototype;\n\t\t\t\n\t\t\t\t\treturn child;\n\t\t\t\t},nowScripts, instance, param;\n\t\t\t\t\n\t\t\t\tWidgetfly.Panel.extend = Widgetfly.Modal.extend = Widgetfly.Popover.extend = Widgetfly.Server.extend = extend;\n\t\t\t\n\t\t\t\t// Initialize for DOM prepare\n\t\t\t\t// -------------\n\t\t\t\tnowScripts = document.getElementsByTagName('script');\n\t\t\t\tparam  = Widgetfly.Utils.parseUrl(nowScripts);\n\t\t\t\n\t\t\t\tif (!Widgetfly.Utils.inIframe()) {\n\t\t\t\t\tconsole.log('Now is Widgets initialize');\n\t\t\t\t\tWidgetfly.Mediator.init();\n\t\t\t\t\tif (!Widgetfly.Utils.isEmpty(param)) {\n\t\t\t\t\t\t//console.log(param);\n\t\t\t\t\t\tnew Widgetfly.Panel(param);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Now is Server initialize');\n\t\t\t\t\t// widget\n\t\t\t\t\t//var Server = new Widgetfly.Server();\n\t\t\t\t}\n\t\t\t\n\t\t\t})(this);\n\t\t\t\n\t\t\n\t\t\treturn Widgetfly;\n\t\t})(this);\n\t\t\n\t\treturn Widgetfly;\n}));\n"],"sourceRoot":"/source/"}